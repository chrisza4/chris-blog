<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Chris' Dialogue]]></title><description><![CDATA[A blog of Chris, a human who love to learn more about himself and the world]]></description><link>https://chrisza.me</link><generator>GatsbyJS</generator><lastBuildDate>Wed, 21 Dec 2022 11:07:46 GMT</lastBuildDate><item><title><![CDATA[Humanistic Architecture]]></title><description><![CDATA[TLDR; คอร์ส the art of humanistic architecture design ที่จะสอนเรื่อง “การดีไซน์” software architecture…]]></description><link>https://chrisza.me/course/</link><guid isPermaLink="false">https://chrisza.me/course/</guid><content:encoded>&lt;h2&gt;TLDR;&lt;/h2&gt;
&lt;p&gt;คอร์ส the art of humanistic architecture design ที่จะสอนเรื่อง “การดีไซน์” software architecture โดยใช้ศาสตร์ความเป็นมนุษย์เข้ามาเสริม จากประสบการณ์ผมเองที่ synthesize ศาสตร์จิตวิทยาความเป็นมนุษย์ (humanistic psychology) อย่าง Satir enneagram งาน ux/ui ไปจนถึง math และ category theory เพื่อให้มองไปไกลกว่าแค่ตอบโจทย์ตรงหน้า แต่รู้ว่าเราจะเข้าถึงความเป็นมนุษย์เพื่อเลือกคำตอบที่มี impact ที่ดี จากคำตอบที่เป็นไปได้ร้อยอย่างพันอย่างได้อย่างไร&lt;/p&gt;
&lt;h2&gt;Description&lt;/h2&gt;
&lt;p&gt;“In the software engineering world full of trade-offs and competing opinions on what is the best, how do you really decide?&lt;/p&gt;
&lt;p&gt;ในโลก Software ที่ทุกอย่างเป็น Trade-offs ปัญหาแบบเดียวมี Solution มีคำตอบที่แก้ไขได้เป็นพันๆ แบบ แต่ละแบบมี Trade-offs ต่างกัน และก็มีคนมากมายเหลือเกินให้ความเห็นว่า trade-offs แบบของฉันดีที่สุด คุณตัดสินใจอย่างไร&lt;/p&gt;
&lt;p&gt;กระบวนการตัดสินใจตรงนี้มันไม่สามารถที่จะอธิบายได้ด้วยวิทยาศาสตร์อย่างเดียว เหมือนกับลูกค้าคุณหิวข้าว คุณจะทำกะเพราให้เขากินก็ได้ คุณจะกินข้าวไข่เจียวให้เขากินก็ได้ มันแก้ปัญหาหิวข้าวของเขาได้เหมือนกัน แต่เราเลือกทำอะไรให้เขากินดีนะ และถ้าเลือกสิ่งข่าวไข่เจียว ที่มาที่ไปในการเลือกคืออะไรนะ ถ้าเลือกข้าวกะเพราะ ที่มาที่ไปคืออะไร&lt;/p&gt;
&lt;p&gt;ทีนี้ลองมาดูในงานใกล้ตัวกว่านั้นบ้างในฐานะโปรแกรมเมอร์ ถ้าลูกค้ามีปัญหา Scale เราจะให้เขาใช้ Monolith ต่อไปมั้ย หรือต้องรื้อทำ Microservice เท่านั้น หรือแค่ซื้อเซิฟแรงๆ ทั้งสามอย่างแก้ปัญหาได้หมด แต่เราเลือกแบบไหนให้ลูกค้าดีล่ะ&lt;/p&gt;
&lt;p&gt;ในโลกของ Software Architecture เราพูดตลอดว่าทุกอย่างมี Trade-offs
แต่กระบวนการตัดสินใจเลือก Trade-offs มันมายังไง&lt;/p&gt;
&lt;p&gt;ถ้าเราจับด้วยตรรกะล้วนๆ โดยไม่ให้คุณค่าอะไรเลย ให้คุณค่าทุก trade-offs เท่ากันหมด มันไม่มีทางเลือกได้เลยว่าอะไรดีกว่าอะไร แต่ในความเป็นจริง มันก็มี Solution ที่ถูกใจและไม่ถูกใจ เวิร์คและไม่เวิร์คอยู่เสมอๆ ในแทบจะทุกๆ โปรเจ๊กต์&lt;/p&gt;
&lt;p&gt;เมื่อถึงจุดนี้มันจะไปสู่คำถามว่า แล้วถ้างั้นมนุษย์เรามีกระบวนการเลือกให้คุณค่าอย่างไร ทำไมบางทีสิ่งนั้นมีคุณค่ากว่าสิ่งนี้ นั่นคือสิ่งที่ลึกลงไปอีกขั้นหนึ่ง ที่จะเป็นกุญแจไขว่า Trade-offs ต่างๆ จะเลือกแบบไหน&lt;/p&gt;
&lt;p&gt;แล้วถ้าเราเข้าใจจุดนั้นแล้วเราจะนำเอาคุณค่าของมนุษย์มาเชื่อมต่อกับการออกแบบได้อย่างไรบ้าง หรือเราจะจัดการชุดคุณค่าของมนุษย์ระหว่างการออกแบบอย่างไรถ้าชุดคุณค่าของแต่ละคนที่มีส่วนร่วมมันไม่เหมือนกันและอาจจะขัดแย้งกันเอง&lt;/p&gt;
&lt;p&gt;คอร์สนี้เป็นการตกผลึกส่วนตัวของผู้สอนที่ใช้ศาสตร์จิตวิทยาสาย Humanistic เข้ามาผสมกับการออกแบบ Software Architecture ซึ่งคอร์สนี้จะพาไปเข้าใจในเบื้องต้นถึงกระบวนการการให้คุณค่าของมนุษย์ ของตัวเองเราเอง ของผู้อื่น และนำเอาคุณค่าเหล่านั้นมาใช้เชื่อมกับการออกแบบได้ และสามารถเอาชุดคุณค่ามาร่วมเป็นปัจจัยในการทำ Architectural Decision ต่างๆ ได้&lt;/p&gt;
&lt;p&gt;สำหรับคนที่ติดตามผู้สอนมาซักพัก คอร์สนี้จะเปิดเผยว่าเนื้อหา Talk ต่างๆ ที่ผมเคยพูด งานสอนอื่นๆ ที่ผมทำมาจากพื้นฐานเบื้องลึกอย่างไร ทำไมหลายๆ อาจจะมองว่าผมพูดเข้าใจง่าย มาจากเลนส์มุมมองอย่างไรกันแน่ แล้วจะเข้าใจทั้งฐานคิดและวิธีสื่อสารเพื่อนำปรับไปใช้กับทีมของคุณได้&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.facebook.com/chakrit.likitkhajorn/posts/pfbid02UETwFp5SptBqWr14EXpVn5yGGsrXQrgFhZr2QhpKH8Bo9us35W8u1NSsy6QwGEkxl?__cft__%5B0%5D=AZXS11dgQsmKjc-UOjjJxMAZp9u8LVLqACCAKD2WJlcwNH00-jzor8QJl8abLWObMtQa5GdjxwmMi7MrsTrp_cvuaMnCRLmGuOz4HEpZbUVc3VJKmxq0ZEe3ceJt9z0q_uI&amp;#x26;__tn__=%2CO%2CP-R&quot;&gt;คำโปรยแรก&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.facebook.com/chakrit.likitkhajorn/posts/pfbid02XWvnJVyVk5AXMB9yQ9vfKUNZdRGahUCxYa2uNuyPRp1zGoAZM1gFidFBX3Mj8Ccql&quot;&gt;Teaser&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.facebook.com/chakrit.likitkhajorn/posts/pfbid0nEWpLYF3URBMAUWStpwPL92KvKxMiyL9ZzPv2g1Be14K6uqJxRDhzRX4Ybxj9bVal&quot;&gt;คำโปรยสอง&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;เหมาะสำหรับใคร&lt;/h2&gt;
&lt;p&gt;คอร์สนี้เหมาะสำหรับคนที่มีประสบการณ์การทำงานมาระดับนึง และอยู่ในจุดที่รับโจทย์มาแล้วต้องเลือก Solution ที่ดีที่สุดจากความเป็นไปได้หลายรูปแบบ ไม่ว่าจะเป็นการเลือกภาษา เลือกเฟรมเวิร์ค เลือก Coding Standard หรือเลือก Collaboration Scheme ในระดับองค์กร และเราต้องการ “ออกแบบ” สิ่งที่เหมาะที่สุดสำหรับบริบทนั้น&lt;/p&gt;
&lt;p&gt;คอร์สนี้เหมาะมากเป็นพิเศษกับคนที่ต้องตัดสินใจเรื่อง Architecture ให้คนอื่น ไม่ว่าชื่อตำแหน่งคุณจะเป็น Senior, Lead, Principal, Staff, Architect, VP, CTO ถ้างานของคุณประกอบไปด้วยการที่ต้องตัดสินใจออกแบบ Architecture ให้เพื่อนร่วมงานใช้ คอร์สนี้จะเหมาะกับคุณมาก เราจะเจาะปัญหาพวกนี้เป็นหลัก&lt;/p&gt;
&lt;p&gt;คอร์สนี้ไม่เหมาะกับโปรแกรมเมอร์ที่ต้องการหา Solution ท่าอะไรซักท่ามาตอบโจทย์ของลูกค้าให้ได้ คอร์สจะไม่ค่อยได้เจาะเรื่องนั้น เราจะเรียนกันในสถานการณ์ที่การหา Solution อันนึงเป็นเรื่องไม่ยากนัก เราสามารถคิดท่าได้มากมายหลายท่ามากในการแก้ปัญหา และเราสนใจใครรู่ว่าท่าไหนจะเหมาะที่สุด&lt;/p&gt;
&lt;h3&gt;โจทย์ตัวอย่างที่จะคุยกันในคอร์ส&lt;/h3&gt;
&lt;p&gt;ไม่ว่าเราจะใช้ Monolith หรือ Microservices เราสามารถสร้างซอฟต์แวร์ขนาดใหญ่ได้ทั้งคู่และมีคนเคยทำสำเร็จมาแล้วทั้งคู่ ทั้งคู่สามารถเป็น Solution ของระบบได้ ทำซอฟต์แวร์จนเสร็จได้ คำถามคือ เราจะเลือกสิ่งไหนแล้วทำไมในเมื่อมันใช้ได้ทั้งคู่ เราดูยังไง หรือถ้าเลือกตรงกลางๆ แล้วเราควรจะมี Service กี่ตัวเล็กขนาดไหนใหญ่ขนาดไหน ในเมื่อสุดท้ายไม่ว่าเลือกอะไรองค์กรก็ยังทำงานของมันได้ทั้งสิ้น&lt;/p&gt;
&lt;p&gt;เราจะคุยกันผ่าน Event หรือ RPC ดี ทั้งคู่เป็น Communication Scheme ที่ใช้ได้ทั้งคู่ ไม่ว่า Service สองตัวที่ต้องการสื่อสารกันจะเป็นแบบไหน ทั้งคู่สามารถใช้แก้ปัญหาได้ถ้าเราพยายามมากพอกับมัน แต่แน่นอนมันมีบริบทที่ Event แก้ปัญหาได้เหมาะกว่าและ RPC แก้ปัญหาได้เหมาะกว่า คำถามที่เราจะมาเจาะกันคือ จุดไหน แล้วความเหมาะสมเกิดจากอะไร&lt;/p&gt;
&lt;p&gt;เราจะใช้ Angular หรือ React ดีนะ หรือไม่ใช้อะไรเลยดี ในเมื่อทั้งคู่สามารถสร้าง Frontend แบบไหนตามใจลูกค้าได้ทั้งคู่&lt;/p&gt;
&lt;p&gt;Framework อย่าง Rails กับสิ่งเล็กๆ อย่าง Express ทำได้ดีทั้งคู่มีคนชอบและก็มีคนด่าทั้งคู่ ทำไมผมถึงไม่เคยชอบ Rails แต่มองว่ามันเป็นของดี&lt;/p&gt;
&lt;p&gt;ทำไม Golang ถึงได้เป็นภาษาที่ผมมองว่ามัน Well-designed ทั้งๆ ที่มันไม่มีฟีเจอร์หลายอย่างและกว่าจะมี Generic ก็นานมาก&lt;/p&gt;
&lt;p&gt;ในหลายมุมมอง Functional programming กับ OOP มันเสริมกันได้ และในหลายมุมมองทำไมมีคนมากมายบอกว่ามันขัดกันเอง มันเกิดจากมุมมองต่างกันอย่างไรแล้วเราในฐานะนักออกแบบหรือนักดีไซน์ เราจะวางระบบไว้ใน Spectrum ประมาณไหนจากอะไร&lt;/p&gt;
&lt;h2&gt;เนื้อหา&lt;/h2&gt;
&lt;h4&gt;Day 1&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Prelude: Problem &amp;#x26; Disappointment&lt;/strong&gt; Anatomy ของ “ปัญหา” และ “ความไม่พอใจ”&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Episode 1: Satir&lt;/strong&gt; การใช้ซาเทียร์ในการทำความเข้าใจเบื้องลึกที่อยู่ใต้ “ปัญหา”&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Episode 2: Vision in humanistic lens&lt;/strong&gt; สร้าง Architecture Vision ที่สามารถ Resonate กับมนุษย์ได้ดี สอดคล้องกับ Value ที่ตั้งไว้ รวมไปถึงการสื่อสาร และ Synthesis คุณค่าของมนุษย์ออกมาเป็นภาพที่เข้าใจตรงกันได้ง่าย โดยใช้หลักจิตวิทยาเข้ามาช่วย&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Day 2&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Episode 3: Abstraction&lt;/strong&gt; การออกแบบ Abstraction (หรือเลือก Abstraction ที่คนอื่นออกแบบใน Framework และ Design Pattern ต่างๆ มาใช้และปรับปรุง)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Episode 4: Developer Testing&lt;/strong&gt; ประยุกต์ใช้ศาสตร์ User Testing ของ UX เพื่อเอามา Validate งานออกแบบ&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Episode 5: Design Pattern &amp;#x26; Case studies&lt;/strong&gt; (in humanistic architecture lens) นำเอาสิ่งที่เรียนมาทั้งหมดมาวิเคราะห์ Case study ของการออกแบบต่างๆ ให้เราเลือกใช้และเลือกออกแบบอย่างเข้าใจ และผสมผสานประยุกต์ได้ตามความเหมาะสมของบริบท&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Factory, IoC Container &amp;#x26; Polymorphism&lt;/li&gt;
&lt;li&gt;Object oriented programming vs Functional Programming Spectrum&lt;/li&gt;
&lt;li&gt;RPC vs Event-driven Microservices Specturm&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(และ Case study อื่นๆ หากมีเวลาเหลือ เช่น Log Formatting, GraphQL vs RESTFul design)&lt;/p&gt;
&lt;h2&gt;เวลาเรียน&lt;/h2&gt;
&lt;p&gt;คอร์ส 1 (Active): วันที่ 4-5 กุมภาพันธ์ 2023 เวลา 9.00-16.30
สถานที่: &lt;a href=&quot;https://www.google.com/maps/place/Geeky+Base/@13.852423,100.5803335,17z/data=!3m1!4b1!4m5!3m4!1s0x30e29d2386568ec7:0xdf0eb043fcd08544!8m2!3d13.8524221!4d100.5825129&quot;&gt;Geeky Base&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;รับผู้เรียนทั้งหมดจำนวน 20 คน&lt;/p&gt;
&lt;p&gt;ราคา: 7,000 บาท&lt;/p&gt;
&lt;p&gt;โอนเงินจองได้ที่ Promptpay 0879337879 นายชาคริต ลิขิตขจร&lt;/p&gt;
&lt;p&gt;แจ้งโอนเงินได้ที่&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Facebook messenger: &lt;a href=&quot;https://www.facebook.com/chakrit.likitkhajorn&quot;&gt;Chakrit Likitkhajorn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Email: chakrit.lj@gmail.com&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(หากปิดคอร์สแล้วจะแจ้งให้ทราบทางเว็บเพจนี้)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Simplicity fallacy of "Just use X (for everything)"]]></title><description><![CDATA[For the past few years I found one commmon fallacy trope. “Stop introduce more technology. Just use X for everything. It will be much…]]></description><link>https://chrisza.me/not-simple/mistaken-simplicity/</link><guid isPermaLink="false">https://chrisza.me/not-simple/mistaken-simplicity/</guid><pubDate>Tue, 13 Dec 2022 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;For the past few years I found one commmon fallacy trope.&lt;/p&gt;
&lt;p&gt;“Stop introduce more technology. Just use X for everything. It will be much simpler.”&lt;/p&gt;
&lt;p&gt;This trope can range from &lt;a href=&quot;https://www.amazingcto.com/postgres-for-everything/&quot;&gt;Postgres&lt;/a&gt;, Make, HTML-CSS-JS and so-on.&lt;/p&gt;
&lt;p&gt;While I think there is a lot of merit in limiting amount of technology stacks in organization and I’ve seen many unjustifiably complicated systems consist of 10 frameworks and 20+ tech stack behind the scene just because devs want to play with new shiny toy. I also think the position of just use “X” is pretty bad in its own way.&lt;/p&gt;
&lt;p&gt;Because, simply put, why “X” when we can also use “Y” for everything as well.&lt;/p&gt;
&lt;p&gt;Take Postgres for example: technically speaking we can use Postgres to build queue, to do a full-text search and possibly Redis replacement according to &lt;a href=&quot;https://www.amazingcto.com/postgres-for-everything/&quot;&gt;this article&lt;/a&gt;. But one thing that I might argue: Why Postgres over, let say, SQL Server or MySQL or just plain old boring file?&lt;/p&gt;
&lt;p&gt;There might be some technical answer to this question. But I guarantee most of the times it’s because the speaker is proficient in Postgres.&lt;/p&gt;
&lt;p&gt;Implementing queue in Postgres &lt;a href=&quot;https://www.reddit.com/r/programming/comments/zk3hbg/comment/j0031fy/?utm_source=share&amp;#x26;utm_medium=web2x&amp;#x26;context=3&quot;&gt;is not that easy and require a lot of experience to nail it right&lt;/a&gt;. I would bet using Postgres as Redis replacement would have even more edge cases and concern.&lt;/p&gt;
&lt;p&gt;In the eye of Postgres expert, it is simple. In the eye of everyone else, it’s super complicated.&lt;/p&gt;
&lt;p&gt;And this is where the fallacy lie in. Someone who familiar with X will say that using X for everything is simple because you just need to learn X. And they might forget how it took them years of experience until one start to find X simple.&lt;/p&gt;
&lt;p&gt;C++ can also be very simple for someone btw.&lt;/p&gt;
&lt;p&gt;I know someone who advocate for using Makefile for everything infra relate because he is so proficient at it. He can’t see why we need to embed our script into &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; or using few lines of Python/Go for cli task. Then I know someone who advocate for using Python for every cli task because “It’s simpler. Everyone know about Python right?“.&lt;/p&gt;
&lt;p&gt;And I can imagine how they will fight and pointing finger to each other for “introducing needless complexity”. Why don’t you embrace simplicity and just use X for everything?&lt;/p&gt;
&lt;p&gt;I agree with general concept of limiting technology stack. Sadly most of the times it isn’t really about general concept of simplicity, it’s about using technology that the advocater familiar with.&lt;/p&gt;
&lt;p&gt;Here is a litmus test. If you advocate for using X for everything because simplicity then consider this. When your team said that Y can achieve the same and everyone else except you is more productive with Y, will you change your mind and advocate for using Y for everything instead? Will you drop your expertise on X and advocate for Y for sake of simplicity? (Assuming Y can achieve this technically speaking)&lt;/p&gt;
&lt;p&gt;In general, is it really about priniple of simplicity by using one technology or is it about using what you already familiar with?&lt;/p&gt;
&lt;p&gt;I usually agree with principle of simplicity but I find it is very rare to see true believer. It’s usually more about just get back and use what I learned for the past 10 years rather than simplifying technology stacks.&lt;/p&gt;
&lt;p&gt;Also, we can technically use C or Assembly for everything. Radical simplicity has its own limit. What grind my gear is how people usually draw the line. It’s almost always like what I am currently good at is inherently simple and what I don’t know is needless complexity since I can use what I am good at to achieve the same.&lt;/p&gt;
&lt;p&gt;General simplicity shouldn’t care much about your personal expertise, don’t you think?&lt;/p&gt;
&lt;p&gt;Modified from Douglas Adam quotes, it’s almost like this:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Anything that is in the world when you’re start your tech career is normal and ordinary and is just simple technologies we all should rely on.&lt;/li&gt;
&lt;li&gt;Anything that’s invented between when you’re first to ten years of tech career is new and exciting and revolutionary and have so much potential.&lt;/li&gt;
&lt;li&gt;Anything invented after that is a blatantly complex technology created by clueless kids who just reinvent the wheel.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Moral of story: If you believe in simplicity of using fewer framework and tech, don’t stick with just technologies that you know. Otherwise, you aren’t into principle that much to begin with.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[TDD Misconception: Yes, you can write code before test in TDD]]></title><description><![CDATA[I start a title with a controversial statement. Yes, you can write code before a test in TDD. After I pair with many TDD practitioner…]]></description><link>https://chrisza.me/tdd-misconception/</link><guid isPermaLink="false">https://chrisza.me/tdd-misconception/</guid><pubDate>Sat, 23 Apr 2022 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I start a title with a controversial statement. Yes, you can write code before a test in TDD.&lt;/p&gt;
&lt;p&gt;After I pair with many TDD practitioner, especially the beginner one. I found that many of them usually discourage me to write any code before test. I could not touch a codebase, keyboard or play around with anything before I write a test case.&lt;/p&gt;
&lt;p&gt;So here I am, making a statement as a TDD practitioner too. You can write a code before test in TDD.&lt;/p&gt;
&lt;p&gt;It is clear that any TDD tutorial and content says that you need to write tests before code. Why do I claim this?&lt;/p&gt;
&lt;p&gt;Let me explain.&lt;/p&gt;
&lt;h2&gt;The step zero of TDD: design&lt;/h2&gt;
&lt;p&gt;When we normally talk about TDD we usually just talk about the test-code-refactor cycle. We often forget or take a pre-requisite step for a grant.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;We need to design the code we want to write first&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;We cannot to TDD without designing an interface, class or function. We need to figure out where will we put a new code first. Is it in an existing method? Is it in a new class? Is it in a new method?&lt;/p&gt;
&lt;p&gt;Without this step, we cannot even write a test. At least we need to have method(s), procedure(s) or function(s) in our mind to write a test.&lt;/p&gt;
&lt;p&gt;One thing why people advocate for TDD is because TDD encourages good design. You need to put some thought into where would you put the implementation, what should be an interface and all the design stuff. You need to make a decision on the interface in order to write a test before a code. And that’s why generally speaking, TDD encourages good design. (This topic is still in a heated debate. Some claimed that TDD hurt the design.)&lt;/p&gt;
&lt;p&gt;The full TDD cycle is not just test, code and refactor. It’s actually a design, test, code and then refactor. There is a zero-phase involved, design how and where your implementation should be.&lt;/p&gt;
&lt;h2&gt;Coding can be part of designing&lt;/h2&gt;
&lt;p&gt;There are many ways to come up with an interface design. You can think in your head. You can use a notebook. You can use a whiteboard. You can use a virtual whiteboard. There is no limitation on how would you design your interfaces.&lt;/p&gt;
&lt;p&gt;And one approach to the design is to write some POC (aka. throwaway) code.&lt;/p&gt;
&lt;p&gt;When I am not confident about having all the details I need to design an appropriate interface for a business requirement, writing a code (maybe working one or not working one) can help a lot in surfacing missing details.&lt;/p&gt;
&lt;p&gt;The act of coding can help in figuring out the design. And no rule in software engineering states that the design must not involve any act of coding. And if someone tries to declare and enforce this rule, it will be an obviously stupid rule.&lt;/p&gt;
&lt;p&gt;The point here is that in TDD, you can code as much you want if it helps you discover an appropriate design. TDD only says that any &lt;em&gt;production code&lt;/em&gt; must have tests first. Not any type of code.&lt;/p&gt;
&lt;p&gt;So the misconception here is that you cannot touch your keyboard and type any code before writing a test. You can, as long as it is not a production code.&lt;/p&gt;
&lt;p&gt;The key here is that the code generated in this design phase is to discover an appropriate design. It is a throwaway code.&lt;/p&gt;
&lt;p&gt;You should not expect to use code generated in this phase as a production code. Well, you can copy some of it into production code but you need to treat it as some kind of code in the documentation, Google or Stackoverflow. You generated a test and a blank method first, you wrote some code that satisfied the test. Some of the code might be copied from some kind of documentation with few modifications.&lt;/p&gt;
&lt;p&gt;You can treat throwaway code this way instead of trying to use the throwaway code as much as possible.&lt;/p&gt;
&lt;p&gt;Don’t fall into the sunk-cost fallacy here. After the design, the test-code-refactor cycle still remains.&lt;/p&gt;
&lt;h2&gt;Dogma about not writing any code&lt;/h2&gt;
&lt;p&gt;Looking back, somehow many TDD practitioners have an idea that we need to constrain ourselves to design an interface within only our mind and somehow in the end this will result in better architecture.&lt;/p&gt;
&lt;p&gt;Duh, right?&lt;/p&gt;
&lt;p&gt;I think sometimes we take TDD practice too literally and we lost sight of how this concept actually works. The underlying idea of TDD is not about writing a test first. The underlying idea of TDD is that if you can’t think of a way to test just your new implementation, you might design it wrong.&lt;/p&gt;
&lt;p&gt;That is why we are forcing ourselves to write a test first. We want to force ourselves to think about how to test as opposed to “it works now. the test can be an afterthought”.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Test-driven development offers more than just simple validation of correctness, but can also drive the design of a program. By focusing on the test cases first, one must imagine how the functionality is used by clients (in the first case, the test cases). So, the programmer is concerned with the interface before the implementation. This benefit is complementary to design by contract as it approaches code through test cases rather than through mathematical assertions or preconceptions. &lt;a href=&quot;https://en.wikipedia.org/wiki/Test-driven_development#Benefits&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And that is what actually makes TDD generally lead to a better code architecture. You can argue about how TDD can lead to a bad design all you want but one thing you need to admit is that TDD generates testable code with a lot of testable units. Always.&lt;/p&gt;
&lt;p&gt;You can write some code before tests in TDD, but only as a design tool and without any expectation that the code written in this phase should be used in production. You don’t need to unnecessary constraint yourselves to put down the keyboard and forbid any code writing activity during the design phase just because someone says in TDD you need to write tests before code.&lt;/p&gt;
&lt;p&gt;Let us try not to take software development practices too literally and dogmatic (and disguise this short-sightedness as “disciplined”). Let us try to be more understanding of the underlying concept of software development practices.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[CRUD is simple until it's not]]></title><description><![CDATA[Every app is just a glorified CRUD app with extra steps. There are a lot of debates happening in the dev community between using complex…]]></description><link>https://chrisza.me/crud-or-not/</link><guid isPermaLink="false">https://chrisza.me/crud-or-not/</guid><pubDate>Sun, 16 Jan 2022 05:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Every app is just a glorified CRUD app with extra steps.&lt;/p&gt;
&lt;p&gt;There are a lot of debates happening in the dev community between using complex architecture (such as CQRS) and viewing everything as a CRUD.&lt;/p&gt;
&lt;p&gt;I want to clarify when CRUD is simple enough for the job, and when it is not.&lt;/p&gt;
&lt;p&gt;Let say you want to create an accounting system. You have an invoice. Invoice can be created, read, updated and deleted.&lt;/p&gt;
&lt;p&gt;Sounds like a CRUD app.&lt;/p&gt;
&lt;p&gt;So you start with a simple Rails-style framework with REST-style API surface, where everything is just a resource that can be CRUDed.&lt;/p&gt;
&lt;p&gt;The code can look like this (simplified version)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ruby&quot;&gt;&lt;pre class=&quot;language-ruby&quot;&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token method-definition&quot;&gt;&lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;/span&gt;
  invoice &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Invoice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;update_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1&gt;Fit everything to CRUD&lt;/h1&gt;
&lt;p&gt;Let say that your invoice can be approved. You added &lt;code class=&quot;language-text&quot;&gt;status&lt;/code&gt; field to the model. The status can be &lt;code class=&quot;language-text&quot;&gt;Draft&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Confirmed&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Approved&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Commented&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Rejected&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And then you some business requirement&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;When an invoice is approved, send a notification to someone so they can proceed to pay.&lt;/li&gt;
&lt;li&gt;When an invoice is commented or rejected, send a notification to the creator so they can be revised.&lt;/li&gt;
&lt;li&gt;When a confirmed invoice has a total of more than 100,000 USD, send a notification to the director level.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If we still model by CRUD, we need a code that looks like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ruby&quot;&gt;&lt;pre class=&quot;language-ruby&quot;&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token method-definition&quot;&gt;&lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;/span&gt;
  invoice &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Invoice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  old_status &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status
  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;update_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  new_status &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status

  &lt;span class=&quot;token comment&quot;&gt;# Send notification to payment department if status changed to approved&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; old_status &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;:Approved&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; new_status &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;:Approved&lt;/span&gt;
    &lt;span class=&quot;token constant&quot;&gt;Notification&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_to&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:payment_department&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# Send notification to invoice owner if invoice was commented or rejected&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; old_status &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;:Confirmed&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:Commented&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;:Rejected&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;included&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;new_status&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token constant&quot;&gt;Notification&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_to&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;owner&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# Send notification to management board if invoice exceed particular amount&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; old_status &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;:Draft&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; new_status &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;:Confirmed&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;total &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;
    &lt;span class=&quot;token constant&quot;&gt;Notification&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_to&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:C_level&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So now we can generalize everything as CRUD.&lt;/p&gt;
&lt;p&gt;Six months later, we want to add functionality to the invoice approval step.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;We want to ensure that any invoice exceeding 100,000 USD must be approved by someone with a proper level of authorization&lt;/li&gt;
&lt;li&gt;We want to lock any invoice that has been rejected more than 3 times.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If we wrote code as CRUD, to implement these requirements you must:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Carefully read through update hoops and see which line is related to which.&lt;/li&gt;
&lt;li&gt;If 2 programmers work in parallel, they might need to resolve to merge conflict.&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;Use business intent&lt;/h1&gt;
&lt;p&gt;Another type of implementation is to put a business intent into our model.&lt;/p&gt;
&lt;p&gt;Instead of update, we have these:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ruby&quot;&gt;&lt;pre class=&quot;language-ruby&quot;&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token method-definition&quot;&gt;&lt;span class=&quot;token function&quot;&gt;approve&lt;/span&gt;&lt;/span&gt;
  invoice &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Invoice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;:Approved&lt;/span&gt;
  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save
  &lt;span class=&quot;token constant&quot;&gt;Notification&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_to&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:payment_department&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token method-definition&quot;&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;/span&gt;
  invoice &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Invoice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;:Reject&lt;/span&gt;
  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save
  &lt;span class=&quot;token constant&quot;&gt;Notification&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_to&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:invoice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;owner&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# And so-on&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Instead of translating business intention such as approve to be like: approval is just an update with extra steps. We instead embedded business intention directly into our method.&lt;/p&gt;
&lt;p&gt;When the business what to modify the approval process, we can search for &lt;code class=&quot;language-text&quot;&gt;approve&lt;/code&gt; method.
When the business what to modify the confirmation process, we can search for &lt;code class=&quot;language-text&quot;&gt;confirm&lt;/code&gt; method.&lt;/p&gt;
&lt;p&gt;Even if this contains more code, it’s become easier to modify and reason about.&lt;/p&gt;
&lt;p&gt;This is the power of moving away from CRUD based modelling.&lt;/p&gt;
&lt;h1&gt;It’s not black and white&lt;/h1&gt;
&lt;p&gt;CRUD is a simple model. There are only four concepts and it can handle almost every requirement imaginable.&lt;/p&gt;
&lt;p&gt;Everything can be viewed as “CRUD with extra steps”. Even network communication can be viewed as “CRUD of network packet with extra steps”.&lt;/p&gt;
&lt;p&gt;It is a simple and powerful model. But it has its own limitation.&lt;/p&gt;
&lt;p&gt;CRUD based method works well until collaboration break.&lt;/p&gt;
&lt;p&gt;You can fit nearly every app into the CRUD model, but at what cost?&lt;/p&gt;
&lt;p&gt;The question is here is not can you, it’s should you.&lt;/p&gt;
&lt;p&gt;If your software grows based on some particular business process, such as if your accounting module is famous for a world-class approval system, it’s worth you putting a highlight to those business intent rather than generalize it to “just CRUD with extra steps”.&lt;/p&gt;
&lt;p&gt;I don’t have a clear line between when to model the app as CRUD and when to do the domain event-based app.&lt;/p&gt;
&lt;p&gt;But I know that if communication starts to break down. If a requirement needs 2 days of dev assessment just to translate the requirement into codebase modelling, check where to change, what is the impact.&lt;/p&gt;
&lt;p&gt;Your model might not be sufficient.&lt;/p&gt;
&lt;p&gt;And that’s when you might need to move on from the simple CRUD model.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Common misconception of dependency inversion]]></title><description><![CDATA[Dependency inversion is widely misunderstood. I will explain why. According to the definition: the principle itself consists of two rules…]]></description><link>https://chrisza.me/dependency-inversion-injection/</link><guid isPermaLink="false">https://chrisza.me/dependency-inversion-injection/</guid><pubDate>Sun, 26 Dec 2021 05:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Dependency inversion is widely misunderstood. I will explain why.&lt;/p&gt;
&lt;p&gt;According to the definition: the principle itself consists of two rules&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;High-level modules should not depend on low-level modules. Both should depend on abstractions.&lt;/li&gt;
&lt;li&gt;Abstractions should not depend on details. Details should depend on abstractions.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In this context, high-level modules mean domain logic and low-level modules mean technology stack. For example: If you are working on an accounting system. All tax formulas are high-level modules, and the database which you fetch invoices and receipts to calculate tax refunds is a low-level module&lt;/p&gt;
&lt;p&gt;You can imply that the gran idea is to decouple business or domain logic from the technology used. If you look back into Robert Martin (the originator of the principle) works on software architecture, you will find that the idea of decoupling business logic out of the technology stack is always his theme. If you want to have a quick look: here is his idea of &lt;a href=&quot;https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html&quot;&gt;Clean Architecture&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Common understanding&lt;/h1&gt;
&lt;p&gt;Back from the idea world to the actual world. Technically speaking, every system heavily depends on a low-level technology stack to perform.&lt;/p&gt;
&lt;p&gt;For example: If a user want see an amount of taxes for invoice number INV001, here is what you normally need to do&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Fetch invoice INV001 from the database&lt;/li&gt;
&lt;li&gt;Apply tax calculation&lt;/li&gt;
&lt;li&gt;Send the calculation result to the client, probably via HTTPS protocol and internet&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You can see that we depend on database implementation, HTTPS and the whole internet to work exactly and consistently as we expected to implement this feature.&lt;/p&gt;
&lt;p&gt;Let say you have to implement a method &lt;code class=&quot;language-text&quot;&gt;CalculateTax(string invoiceNumber)&lt;/code&gt;, you need to at least be able to fetch invoice data from the database. How can we make this “de-coupled” from the database implementation? At a first glance, this seems to be impossible.&lt;/p&gt;
&lt;p&gt;The common understanding is that you can achieve this by using a technique called dependency injection. Instead of depending on concrete implementation&lt;/p&gt;
&lt;p&gt;There are many frameworks out there such as Spring or C# MVC which implement something called dependency injection framework and IoC container. So we can globally register services like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;ConfigSample&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Options&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;Microsoft&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Extensions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DependencyInjection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ConfigSample&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Options&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt;&lt;/span&gt; builder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; WebApplication&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;CreateBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

builder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Services&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;AddScoped&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;IInvoiceRepository&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; InvoiceRepository&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
builder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Services&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;AddScoped&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;IMyDependency2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MyDependency2&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt;&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; builder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and this is where I think the idea become misunderstood.&lt;/p&gt;
&lt;p&gt;Let’s get back to our tax calculation on invoice example, let say you have&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TaxCalculator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IInvoiceRepository&lt;/span&gt; invoiceRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TaxCalculator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IInvoiceRepository&lt;/span&gt; invoiceRepository&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;invoiceRepository &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; invoiceRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token return-type class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CalculateTax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; invoiceNumber&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Invoice&lt;/span&gt; thisInvoice &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;invoiceRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;invoiceNumber&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Calculate tax&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;At a first glance, this seems to be a normal dependency inversion principle implemented using dependency injection and IoC container. We seem to be able to decouple a concrete database implementation out of tax calculation by making &lt;code class=&quot;language-text&quot;&gt;TaxCalculator&lt;/code&gt; depending on just an interface.&lt;/p&gt;
&lt;p&gt;I want to step back from the code and get back to the main idea. All the main idea of this dependency injection and framework stuff is to make high-level modules independent of low-level modules right.&lt;/p&gt;
&lt;p&gt;My question is: What does it mean to be independent?&lt;/p&gt;
&lt;h1&gt;What does it mean to be independent?&lt;/h1&gt;
&lt;p&gt;Well, it depends.&lt;/p&gt;
&lt;p&gt;To answer this question in a precise manner, I need to bring an extreme situation that will make the dependency graph clear: High bureaucracy, low-trusted environment.&lt;/p&gt;
&lt;p&gt;Let say there are two vendors binding by just contract and neither of them is willing to expose their code. One is working on a class &lt;code class=&quot;language-text&quot;&gt;TaxCalculator&lt;/code&gt; class, which is a high-level module. Another one is working on &lt;code class=&quot;language-text&quot;&gt;InvoiceRespository&lt;/code&gt; class, which is low-level module.&lt;/p&gt;
&lt;p&gt;Let’s call the first team as Tax team and the second team as Repo team.&lt;/p&gt;
&lt;p&gt;In the spirit of dependency inversion principle, the Tax team should be independent of the Repo team while the Repo team can still depend on the Tax team, right? That’s mean any changes from the Repo team should not affect the Tax team, but some changes from the Tax team might affect the Repo team.&lt;/p&gt;
&lt;p&gt;That’s one way to make the dependency graph clear.&lt;/p&gt;
&lt;p&gt;In a real Java or C# codebase, we usually see the repository interface that looks like this&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IInvoiceRepository&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token return-type class-name&quot;&gt;Invoice&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; invoiceId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token return-type class-name&quot;&gt;List&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Invoice&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAllByUserId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; userId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token return-type class-name&quot;&gt;List&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Invoice&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAllByEmail&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token return-type class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;AddInvoiceItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;InvoiceItem&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// And more methods&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a clear signal that the interface is not owned by the Tax team. First of all, the interface has many methods unrelated to what Tax team need. Second of all, according to my experience, the interface changes is likely to be dictated by either database implementation or global system requirement.&lt;/p&gt;
&lt;p&gt;Does the Tax team is independent and decoupled from database implementation, in this case, the Repo team?&lt;/p&gt;
&lt;p&gt;I highly doubt that.&lt;/p&gt;
&lt;p&gt;Assuming that dependency inversion is about making high-level modules independent of low-level modules, it safe to say that just using dependency injection and IoC container that the most famous framework provided does not automatically make the codebase achieve dependency inversion principle yet.&lt;/p&gt;
&lt;p&gt;This is where I believe most of the misconception happens. Many people see that dependency inversion must be done using dependency injection (which make sense). The common implementation of dependency injection is using a global IoC container. Hence, most people believe that by just using Spring or C# MVC IoC container, they achieve dependency inversion.&lt;/p&gt;
&lt;p&gt;Understandable, but not true.&lt;/p&gt;
&lt;h1&gt;Real world is messy, but we can make it better&lt;/h1&gt;
&lt;p&gt;At this point, you might argue that it is impossible to make the Tax team truly independent of the technical implementation of the database. And I agree.&lt;/p&gt;
&lt;p&gt;Let’s say Tax team want to have a GUID-based invoice id but the database only supports an integer-based id, what realistically can we do.&lt;/p&gt;
&lt;p&gt;Many hard technical limitations make it impractical to be idealistic and dogmatic about the dependency inversion principle. Some tax calculations might be impractical to do without the help of database-level aggregation.&lt;/p&gt;
&lt;p&gt;However, we can still be better by simply asking ourselves&lt;/p&gt;
&lt;p&gt;How about we let Tax team decide what interface they want?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;TaxModule&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IGetInvoiceById&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token return-type class-name&quot;&gt;Invoice&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; invoiceId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TaxCalculator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IGetInvoiceById&lt;/span&gt; getInvoiceById&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TaxCalculator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IGetInvoiceById&lt;/span&gt; getInvoiceById&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getInvoiceById &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; invoiceRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token return-type class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CalculateTax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; invoiceNumber&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;Invoice&lt;/span&gt; thisInvoice &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IGetInvoiceById&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;invoiceNumber&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Calculate tax&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hence, the Tax team and &lt;code class=&quot;language-text&quot;&gt;TaxModule&lt;/code&gt; defined what interface they want instead of relying on either.&lt;/p&gt;
&lt;p&gt;It’s a matter of who owns the interface.&lt;/p&gt;
&lt;p&gt;If high-level modules own all the interfaces. This means high-level modules dictate changes, and low-level modules need to adhere to what high-level modules define.&lt;/p&gt;
&lt;p&gt;This makes high-level modules truly independent of changes made by low-level modules or global requirements.&lt;/p&gt;
&lt;p&gt;This is better aligned with a vision of dependency inversion.&lt;/p&gt;
&lt;p&gt;And in case the Repo team need to change the interface because of technical limitation, they need to inform the Tax team and ask for them to neither change their interface nor implement some kind of anti-corruption layer. Collaboration still needs to happen. But at least, all Tax team objects depends on the code in &lt;code class=&quot;language-text&quot;&gt;TaxModule&lt;/code&gt;, including all required interfaces. The team become more independent.&lt;/p&gt;
&lt;p&gt;Simply put:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;I suggest that to truly invert dependency, we should let high-level modules define required interfaces instead of global interface or worse, interface dictate by low-level code.&lt;/strong&gt;&lt;/p&gt;
&lt;h1&gt;Language limitation&lt;/h1&gt;
&lt;p&gt;The problem with this approach is that, sadly, the global interface approach is endorsed by IoC container design of the most common framework in practice.&lt;/p&gt;
&lt;p&gt;If you are using Java, Kotlin or C# we don’t have type-inference.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IGetInvoiceById&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token return-type class-name&quot;&gt;Invoice&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; invoiceId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IInvoiceRepository&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token return-type class-name&quot;&gt;Invoice&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; invoiceId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this case, the interface &lt;code class=&quot;language-text&quot;&gt;IInvoiceRepository&lt;/code&gt; cannot be used as &lt;code class=&quot;language-text&quot;&gt;IGetInvoiceById&lt;/code&gt;. What we can only do is to have&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IInvoiceRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token type-list&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;IGetInvoiceById&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And in a large system, you can imagine an explosion of small interfaces&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IInvoiceRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token type-list&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;IGetInvoiceById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ISetInvoiceId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IAddInvoiceItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IGetInvoiceByUsername&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ... and 8 more&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is where I think GoLang did a good job on type-inference and &lt;a href=&quot;https://github.com/golang/go/wiki/CodeReviewComments#interfaces&quot;&gt;defining Go interface philosophy&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Go interfaces generally belong in the package that uses values of the interface type, not the package that implements those values. The implementing package should return concrete (usually pointer or struct) types: that way, new methods can be added to implementations without requiring extensive refactoring.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Anyway, we need to be aware of a language limitation and why are we not doing this yet.&lt;/p&gt;
&lt;p&gt;As a polyglot developer, I believe we need to be aware of both sides of the coin&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;What the ideal principle looks like, and how is it helpful?&lt;/li&gt;
&lt;li&gt;What is the language and framework limitation. Is it practical to adhere with the principle to the letter based on the limitation we have?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;There are two extremes stances. One is to dismiss the purity just because of current limitations ie. “Stupid. We don’t do that here.”. Another one is to be a purist and make a codebase become an unmaintainable mess.&lt;/p&gt;
&lt;p&gt;Both stances are unproductive.&lt;/p&gt;
&lt;p&gt;In Golang, I would obviously adhere to the principle of letting high-level modules define required interfaces instead of global interfaces.&lt;/p&gt;
&lt;p&gt;In C# or Java in a current version, I might not. In the future, who knows?&lt;/p&gt;
&lt;h1&gt;Last note&lt;/h1&gt;
&lt;p&gt;I think the wide misconception occurred because the famous concrete implementation of DI is to use IoC container.&lt;/p&gt;
&lt;p&gt;But that’s just a form, born out of many limitations and legacies.&lt;/p&gt;
&lt;p&gt;The principle itself should be language independent.&lt;/p&gt;
&lt;p&gt;The implementation still depends on the language and framework you use.&lt;/p&gt;
&lt;p&gt;You cannot understand principle from the eyes of just “C# Developer”, “Java developer” or “React Developer”. You need to understand what’s out there in the programming world.&lt;/p&gt;
&lt;p&gt;And you might disagree with the principle. But at least, to be a better programmer, you need to understand&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Ideal situation of programming. Such as principles,&lt;/li&gt;
&lt;li&gt;Current state of programming. Such as technical limitations.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Adhere to the ideal, you become a purist. Adhere to the current state, you become stagnant.&lt;/p&gt;
&lt;p&gt;What I try to say in this article are&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Current implementation of Dependency Inversion principle on some famous frameworks is not really inverting dependency.&lt;/li&gt;
&lt;li&gt;Ideal situation is to make high-level module code does not affect by low-level module change at all.&lt;/li&gt;
&lt;li&gt;We might get closer to the ideal once we have a better language or framework. For example, type-inference is one killer feature that I hope to have in enterprise-focus programming languages.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;That’s one way to consolidate between the ideal and the practical side of programming.&lt;/p&gt;
&lt;p&gt;That’s all for today. Thanks for reading this far!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Start with Microservices. Don't start with Microservices]]></title><description><![CDATA[This article has an oxymoron title. I want to tell two stories. One which makes a case for don’t start with Microservice, one for start with…]]></description><link>https://chrisza.me/microservice-start-not-start/</link><guid isPermaLink="false">https://chrisza.me/microservice-start-not-start/</guid><pubDate>Sat, 16 Oct 2021 05:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This article has an oxymoron title.&lt;/p&gt;
&lt;p&gt;I want to tell two stories. One which makes a case for don’t start with Microservice, one for start with Microservice. And I believe by looking from both side of thing, we will understand more about what is the actual benefit of Microservice.&lt;/p&gt;
&lt;p&gt;So, let’s get start.&lt;/p&gt;
&lt;h2&gt;Don’t start with Microservice&lt;/h2&gt;
&lt;p&gt;Imagine you are working for a big e-commerce platform. And like all e-commerce platform, there is a product list page which show all the product. There is also a checkout page which handling a shopping cart and a checkout process.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/64ea8d6f88b43aa118eff2c09c881782/b5a09/Shopping.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 45.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnUlEQVQoz1VSx6pCUQy8v64Lv0HcCHYXVkTsHRErFizYe+8iiMo8JuCFJwznZDLJ5OSqmEwmOBwOWK1WAe8Wi0Vgs9nk1Ov1MBgMkvP5fPB6vQKPxyNwuVzC2+12KG63G+FwGH6/XxUxyZgoFAoolUool8ty/lCpVFQuGAwilUohEAhAyWQyaLVa6Ha7gk6ng2aziXa7jV6vJ7l6vS4NyPPOXLFYRLVaRaPREM18Ppe8MhwOhdRoNDgej5J4vV7Q6XRIp9N4PB64XC5SrNVqcbvdcD6fcb/fYTQa4XQ6hePver1C4UTb7VaKWTgej/F8PpHP50GzzWYjRofDAXwNc+RoxIlYT4P3+y0apVarScFoNJKTTVarFWazmQgYk/9+v1iv1/h8PjIAG5PnVJyQPGOF+6CQX+p0OsmEfDI/EHdI991uh+l0KppfTLNcLidgTENp2O/3xXEwGGC/34vbb9LFYiFrILdcLlUN98eayWQiL/nXkJNks1nZYTQaRSgUQiQSQTKZRCKRQCwWEzCmhlw8Hldjgnf+bcxmM/4ANl1sy02n4zgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Shopping&quot;
        title=&quot;Shopping&quot;
        src=&quot;/static/64ea8d6f88b43aa118eff2c09c881782/f058b/Shopping.png&quot;
        srcset=&quot;/static/64ea8d6f88b43aa118eff2c09c881782/c26ae/Shopping.png 158w,
/static/64ea8d6f88b43aa118eff2c09c881782/6bdcf/Shopping.png 315w,
/static/64ea8d6f88b43aa118eff2c09c881782/f058b/Shopping.png 630w,
/static/64ea8d6f88b43aa118eff2c09c881782/40601/Shopping.png 945w,
/static/64ea8d6f88b43aa118eff2c09c881782/78612/Shopping.png 1260w,
/static/64ea8d6f88b43aa118eff2c09c881782/b5a09/Shopping.png 1360w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1a1758620915db82383677360df27ecb/b5a09/Checkout.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.291139240506325%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtklEQVQ4y61T16piQRA8//8HIoIgBkT0GsAsKoYH84s+GDDnHDFgLdXQF/fuPi17oKie6jB9pmcMp9MJh8MBm80Gl8sFu93+DbfbDYvFApPJBKvVCp/Ph6+vr28EAgEEg0F4vV5Z+/1+GLFYDOFwWEQGUAyFQhKYTqdRq9VQqVRQrVb/QLlcRqFQkLxisYhkMgkjGo1KYi6XQzabRSaTEaRSKSkaiUQQj8fBjcmJRELATVmAufl8Xrher8Og2O/3MRqNMBwOBdPpFM1mE6VSSfTJZPIN+qhx016vh9lshvF4LNzpdGC02208Hg+8Xi/B8/kEv91uh8PhIDY19RP3+x2tVgun0wnv91v85G63C4PVj8ejJCvO5zPm87mASdQ0hrzdbjEYDH7TGScd0tBd2SmZay3+08duLpeL/AFtaprDozPW6zWu16t0peB6tVoJfvpYbL/fS/e0P3UpuNlsJImd0kGmc7lcCtSn0O4+C5Jvt5sMyVgsFpKoZ8ZpkXWqqil0zWnrpozj5Gkb+A8fO+eQeBSGjv1foNeNx8J72Wg0YOhzI6ut+Hy3fMd/g/o8Hg/MZjN+ATyfqLunWtMvAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Checkout&quot;
        title=&quot;Checkout&quot;
        src=&quot;/static/1a1758620915db82383677360df27ecb/f058b/Checkout.png&quot;
        srcset=&quot;/static/1a1758620915db82383677360df27ecb/c26ae/Checkout.png 158w,
/static/1a1758620915db82383677360df27ecb/6bdcf/Checkout.png 315w,
/static/1a1758620915db82383677360df27ecb/f058b/Checkout.png 630w,
/static/1a1758620915db82383677360df27ecb/40601/Checkout.png 945w,
/static/1a1758620915db82383677360df27ecb/78612/Checkout.png 1260w,
/static/1a1758620915db82383677360df27ecb/b5a09/Checkout.png 1360w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;A long time ago, John, CTO of this company read something about Microservices. John thought that this is a great idea. So John decided to have a Microservice which responsible for the Product list domain, and Shopping Cart domain.&lt;/p&gt;
&lt;p&gt;The microservices architecture allows John to have a product list team and a checkout team. Both of them have their own business objectives, metrics, KPI, SLA and so on. Both teams are cross-functional teams responsible for the product list page and checkout process end-to-end.&lt;/p&gt;
&lt;p&gt;Each of them can go wild with what they want to do. For example, the checkout team can implement their own AB Testing with multiple localization and a nice holiday theme on top of it. The product team can focus on optimizing the product list by suggesting relevant items. Both of them can focus on their area without being afraid of making breaking changes to other areas, as long as the backward compatibility of API communication between domains is maintained.&lt;/p&gt;
&lt;p&gt;Furthermore, we can partially scale the system. Let say we have a big Friday promotion, the customer will browser products and promotions a lot more. We might need a much bigger Product list backend while a little bit bigger checkout page.&lt;/p&gt;
&lt;p&gt;Perfect sounds good. Life is nice.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Next year, Jane the CEO want to have a promotion sales. Jane also figured out from some research that if show relevant products on the landing page and during the checkout process can significantly increase sales.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6e22142e3e67e9df844a59450490ddca/bc3ae/ShoppingPromo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtklEQVQoz11Sx6oCQRCc/9YP8OQXCCKeFBVBRcw5YjyICOacs6KI1qMaZg9vobdne6qqe2tGud1u+P1+2O12+Hw+eDweeL1eYx0IBBAKhRAOh5HNZpHP55HL5YxIpVKCz2QyiEajUCRqQYozOxwOIygUi8WQSCSQTCZFIJ1OG5kiTqdTBIPBIFSxWEShUEC5XJbulUoFpVIJ7XYbtVpN1twjrtVqSY3f1WrVwDWbTVnX63UovihIocFggP1+j9FohEgkgm63i8vlgt1uh+VyKdN0Oh3BHI9HyfF4HI1GQ3Dv9xvq8XjAarWKD7/fD4vFAufzGSaTSX7h8/lgPp/j+XzCbDaLt9xng+/3C4vFApvNJjg2UJPJRPygwZvNBuPxWGI6nYp4v9/Her0WAvP9fpfpuOZDDodinY0URyW51+uJEDuzNhwOcb1ecTgcRJjTcFKSuE8cH3KJeb1eUlfsxlOmZ+y0Wq0kXC6XmMwayRSiLTw4/hoxt9tNbKG3FJMJt9utdGF3mq/9oRWz2UxqeiJdI+d0OkmNXNZoAadUPG5eCWZ2Z/DU9XWit/pC8/t/jTjN5z3+Ayl0sm2U5dsrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Shopping Promo&quot;
        title=&quot;Shopping Promo&quot;
        src=&quot;/static/6e22142e3e67e9df844a59450490ddca/f058b/ShoppingPromo.png&quot;
        srcset=&quot;/static/6e22142e3e67e9df844a59450490ddca/c26ae/ShoppingPromo.png 158w,
/static/6e22142e3e67e9df844a59450490ddca/6bdcf/ShoppingPromo.png 315w,
/static/6e22142e3e67e9df844a59450490ddca/f058b/ShoppingPromo.png 630w,
/static/6e22142e3e67e9df844a59450490ddca/40601/ShoppingPromo.png 945w,
/static/6e22142e3e67e9df844a59450490ddca/78612/ShoppingPromo.png 1260w,
/static/6e22142e3e67e9df844a59450490ddca/bc3ae/ShoppingPromo.png 1268w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cb0c838b18a8615d4b00dc103c849ecd/b5a09/CheckoutwithPromo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 80.37974683544303%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVQ4y51U14oqQRCd//8C9U2MiKCYFV1zxJwzZsw5omstp5aR8S4Xli04M92nQnd1V7WgVCpJp9ORRqMhtVrNY5VKxWNwGMtkMlIoFKTX68lsNpPJZHqD0WhkXqvVkgDC5/OR3W4nq9VKFouFbDYbz51OJ2UyGcpmsz+Qz+cZ0LtcLopGo2wv4AMiEokwKf4Bj8fDgQOBAMPv9zOCwSA5HA5yu90UDocpHo+zH2wEr9dL6XSaJpMJjcfjF4bDIeVyOep2u6yTYrlcUiqVokKhwGORx1xIJpM0nU7p8Xi88Pn5SdfrlRaLBT2fzzfd/X4nSK/X4yAQcNDVajUSEHW/39PhcHjheDzSZrNhh9Pp9EMPDjrYwFbky+Xyd0Ds5nK5vIA5DObzOd1utzcdAA462Eh96/U6Cbix8/nMqwIY/xsQnOiEMbjZbMY7Fzn4vlLGGSAIIKYgpow5HKUAJ00ZQFAOiGtHieCmY7EYH/ZqteLdAbhFXA6AOf7gRCDoaDSiVqv1nXK1WqVSqURyuZyD7XY7+ou0220uM6HZbPIELYYVt9stG6B0UDK/AQQbSyQSJBSLRU4F261UKrRer9ngt8EALA5BdkKj0eAzQOP3+/0/pwzB+QqdTod3OBgMOGWUAVaUdoe0S/4HCPwFNDn6Eg0eCoW4+T8+PrjR8QgA4EWgKqTAoyA+EAaDgb4AsFqNV+oxCCUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Checkout Promo&quot;
        title=&quot;Checkout Promo&quot;
        src=&quot;/static/cb0c838b18a8615d4b00dc103c849ecd/f058b/CheckoutwithPromo.png&quot;
        srcset=&quot;/static/cb0c838b18a8615d4b00dc103c849ecd/c26ae/CheckoutwithPromo.png 158w,
/static/cb0c838b18a8615d4b00dc103c849ecd/6bdcf/CheckoutwithPromo.png 315w,
/static/cb0c838b18a8615d4b00dc103c849ecd/f058b/CheckoutwithPromo.png 630w,
/static/cb0c838b18a8615d4b00dc103c849ecd/40601/CheckoutwithPromo.png 945w,
/static/cb0c838b18a8615d4b00dc103c849ecd/78612/CheckoutwithPromo.png 1260w,
/static/cb0c838b18a8615d4b00dc103c849ecd/b5a09/CheckoutwithPromo.png 1360w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;There are some specific pricing scheme, relevancy (a customer who buy a lot of IT-related items get more discount on IT items), and customer privileged classes. These should be managed by the product list team since they have done much research on how to display relevant attractive products. Also, the product list team know exactly how to show the product in an attractive manner. They know exactly what color, font, image size and margin yield the best conversion rate.&lt;/p&gt;
&lt;p&gt;However, this change going to be tough.&lt;/p&gt;
&lt;p&gt;Since both the backend and the frontend for the Checkout process and product page belong to different microservice, so we need to share code, design, logic, etc. between both teams. We can do a simple copy-paste, we can create a shared library, we can expose some kind of API.&lt;/p&gt;
&lt;p&gt;While those are all technically possible, implementing this type of change in this microservices architecture required significantly more effort compared to a monolith architecture.&lt;/p&gt;
&lt;p&gt;And what if we need to iterate the design, data, and everything in promotion? Every change in each iteration must be reflected on both the checkout page and product list page. If we don’t do it right, we will need to double all the work or keep redesigning API between these two teams again and again.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Once we use microservice architecture, we essentially make &lt;strong&gt;any change within service become easier&lt;/strong&gt;, while &lt;strong&gt;a change across services become harder&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bed51e39b4c182f44db7d75614b11796/3fca6/Change.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNElEQVQoz21Sya6DMAzM/38WR3rgQKuylxaxg1gqIcrmp7FeUFLVUhTHjp2ZiQX923EcvE/TRPf7nV6vF680TcmyLLpcLuzLOO6M46jVwgQOMrBtG91uN26qmm3b3HTf9zO2LAtdr1f6fD5nUyyhFgJBWZbaq3EcU9/3tK4rBUGg5RBHXjWR5zkVRUFVVTESoMTCGTuazPNMdV2T4zhc1DQNs0AeKHEXQABIDMNAbduyHigABSDouo4phmHIxci7rssN4eMRoIaW7/ebe6BGo4yXH4+HRkGiR5MkSehboizLdMpSTKmL53kEGVQzTZMMw9B+ExIAnfoh2qeol5/PJ9PH7vs+o4b48BEDdUgha7SxUQNqAj60wXhIg2agro7Pd634lVAlwGgALYY5iqKzGfZfQP4Aw0QBA4gVICkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Change&quot;
        title=&quot;Change&quot;
        src=&quot;/static/bed51e39b4c182f44db7d75614b11796/f058b/Change.png&quot;
        srcset=&quot;/static/bed51e39b4c182f44db7d75614b11796/c26ae/Change.png 158w,
/static/bed51e39b4c182f44db7d75614b11796/6bdcf/Change.png 315w,
/static/bed51e39b4c182f44db7d75614b11796/f058b/Change.png 630w,
/static/bed51e39b4c182f44db7d75614b11796/40601/Change.png 945w,
/static/bed51e39b4c182f44db7d75614b11796/3fca6/Change.png 1112w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Since we as a human are bad at predicting future, we should never start with microservices. We don’t know what business going to expect from us 6-12 months down the line. However we split microservice, it is likely to be wrong.&lt;/p&gt;
&lt;p&gt;Let’s never start with Microservice.&lt;/p&gt;
&lt;h2&gt;Start with Microservice&lt;/h2&gt;
&lt;p&gt;Let’s rewind back and see how things can go differently.&lt;/p&gt;
&lt;p&gt;John, CTO of this company read something about Microservices. John thought that this is a disastrous idea. Everything Microservices technically solve can also be done with Monolith, so why add distributed part into the equation? Most of our programmers will suffer from &lt;a href=&quot;https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing&quot;&gt;the fallacies of distributed computing&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;John insisted on using Monolith architecture.&lt;/p&gt;
&lt;p&gt;John has a team of around 30 developers. At this scale, it is not possible for John to take reviewed every single change to his big monolith. So he checked the code once in a while.&lt;/p&gt;
&lt;p&gt;The company took the opposite direction: They want to implement a single &lt;strong&gt;Buy now!!&lt;/strong&gt; button, which essentially is a single-step checkout.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1a9c3dd386048dabf02da5f54db4b9f2/e515d/buynow.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlElEQVQoz01SV8vCQBDM/3/1yceABUUQRLEido2KNXbFHqxYsEGEkdmPhO9guN29vb2Z3VM6nQ5SqRTS6TSi0Siy2SwymYzAssPhsJwVCgWUy2WUSiUbjOVyOcmdzWZQmOB2u+H3+6GqKnw+HzweD7xeryASiSAWiwkSiYQgmUwKSITngUAAwWAQuq5DGQwGaLfb4gyHQ4zHY3S7XRv0+/0+Wq0WqIY5k8nE9nu9HhaLBTabDQzDgEKar9cLDodDDq7XK57PpzCmlM/nI36lUoHL5RKbOfv9Hk6nE9PpFO/3G1yXywUKGdCg9O12i91uJ2g2mxiNRmLf73es12thxMcPhwMejwfq9brc5QOmaeJ8PkMh5ePxKBeYuFwusVqt7OK0GedF7ixOebfbTSTSP51O+H6/fwXJhM1l09noarUq0+NkOQBN09BoNBAKhRCPx5HP56WvHAYnzzv0uaQg+zafz4UZbbIlAytutYA2QSVkxHMLLETZVCCS+ZdqtZqwYy/JygL9/zEOp1gsym6BcbLnb/gBR39wFlRBC9IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Buy Now&quot;
        title=&quot;Buy Now&quot;
        src=&quot;/static/1a9c3dd386048dabf02da5f54db4b9f2/f058b/buynow.png&quot;
        srcset=&quot;/static/1a9c3dd386048dabf02da5f54db4b9f2/c26ae/buynow.png 158w,
/static/1a9c3dd386048dabf02da5f54db4b9f2/6bdcf/buynow.png 315w,
/static/1a9c3dd386048dabf02da5f54db4b9f2/f058b/buynow.png 630w,
/static/1a9c3dd386048dabf02da5f54db4b9f2/40601/buynow.png 945w,
/static/1a9c3dd386048dabf02da5f54db4b9f2/78612/buynow.png 1260w,
/static/1a9c3dd386048dabf02da5f54db4b9f2/e515d/buynow.png 1430w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Since this is obviously on the Product List page, so stakeholders ask the Product List team to develop it. One of the developers looked at the requirement. They thought that since this page is all about the product, we should implement it in a product class like this.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CheckoutWithOneClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PaymentService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pay&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Price&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;From a seasoned developer perspective, this is a very very strong code smell. Somehow, this passed through code review, got check-ins, and become the main part of the monolith.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Six months later, everything relate to checkout become really hard to implement and buggy. If we want to be able to apply promo code, we need to remember that there are one-click checkout implemented in a product class. If we want to provide a discount for a special class of customers, we also need to remember this as well. There were many instances where the checkout team was asked to implement some sophisticated checkout scheme, and it does not work well with this one-click button.&lt;/p&gt;
&lt;p&gt;Feature development, bug fixes and everything related to the checkout process was implemented separately. And since Product Team own the &lt;code class=&quot;language-text&quot;&gt;Product&lt;/code&gt; class and Checkout team own the &lt;code class=&quot;language-text&quot;&gt;CheckoutService&lt;/code&gt;, each team interpreted requirement a little bit differently and implement business logic a different way. One might check for promo code first and the other might check for customer privileged first and so on.&lt;/p&gt;
&lt;p&gt;John saw this once it is too late. There are many code duplications and separate logic branches between &lt;code class=&quot;language-text&quot;&gt;CheckoutWithOneClick&lt;/code&gt; and the normal checkout process. It would take quite a significant investment to refactor this piece of code.&lt;/p&gt;
&lt;p&gt;At some point, John was fired and Jane hired a new CTO.&lt;/p&gt;
&lt;p&gt;The first question Jane asked was: Why is it so hard for us to do anything in the checkout process?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;New CTO: Well, there is a different logic implemented in one-click checkout and normal checkout. This makes it hard to do anything in the checkout process.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Jane: How did this happen?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Random Engineer in the team: Everyone know about this. It’s started by one of the developers decide to have separate logic for one-button check-in. That’s bad, but I don’t know how John could do it better. He could not possibly check every piece of code.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;New CTO: Well, John should have started with Microservice. That way, the product list team would never be able to come up with this design. They would be blocked by Checkout team service ownership.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;The value of Microservice&lt;/h2&gt;
&lt;p&gt;Well, John was in a weird situation. Doom if he used Microservice, also doom if he didn’t.&lt;/p&gt;
&lt;p&gt;Because essentially, Microservice is a management tool.&lt;/p&gt;
&lt;p&gt;Microservice prevent some type of changes and enable some type of changes to be easier.&lt;/p&gt;
&lt;p&gt;In the first example, the Microservice architecture prevents desirable changes. In the second example, the lack of Microservices architecture enables an undesirable set of changes.&lt;/p&gt;
&lt;p&gt;That is why John is doomed either way. The problem is not about Monolith vs. Microservice. The problem is about architecture choice misalignment with business growth.&lt;/p&gt;
&lt;p&gt;Well, you can argue that in the second story John can work harder and make sure all the code have design review and throughout audit and etc. But that’s the point. That kind of management solution can be costly and add a lot of overhead into the development process.&lt;/p&gt;
&lt;p&gt;Microservice can reduce that cost by making it inherently hard to mess the design up. But when we actually want to mess the design up for a good reason, well… you got the scenario in the first story.&lt;/p&gt;
&lt;p&gt;In the end, the architecture must align with business growth. That is all to it.&lt;/p&gt;
&lt;p&gt;When you use microservice, you enable some set of growth to be easier and simultaneously disable some type of growth to be harder.&lt;/p&gt;
&lt;p&gt;If you have a checkout microservice, the checkout team would be able to churn out new features much faster. They can release on their own. They can use a programming language they prefer. They don’t depend on the other team. They can manage the scalability of their service independently.&lt;/p&gt;
&lt;p&gt;That is, what I believe, the core benefit of microservice architecture.&lt;/p&gt;
&lt;p&gt;Every technical aspect of Microservice, such as independently scale some part of the system or using multi-language implementation, can be solved using Monolith. You can use a build and configure it to open a specific endpoint for some containers and there you go independently scaling just a part of the system. You can use cross-process communication at the OS level and manage binary distribution and there you go, multi-language implementation. The latency might be even better than the network.&lt;/p&gt;
&lt;p&gt;What Monolith cannot solve is when you want to have a certain type of management structure and incentivize growth and creativity in a certain area by giving autonomy and a frequent independent release cycle. That is what really really hard to do in Monolith architecture.&lt;/p&gt;
&lt;p&gt;So I would say the deciding factor for Microservice implementation: Is it aligned with how your organization want to grow?&lt;/p&gt;
&lt;p&gt;Because again, Microservice essentially is a technical solution to the management problem. And it is a real problem that requires a good solution.&lt;/p&gt;
&lt;p&gt;If you think it is a stupid management problem, well I invite you to try solve that. If you can solve just a simple question of “how to make programmers collaborate effectively?” in a scalable and repeatable way, I believe you have the potential to be richer than Jeff Bezos.&lt;/p&gt;
&lt;p&gt;Amazon has been working on this. Google has been working on this. Facebook has been working on this. Every behemoth tech company in existence have been working on this for decades and they came up with Microservice stuff. If you have a better answer, then go ahead, let me and all those guys know. They are ready to invest.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Is this too complex?]]></title><description><![CDATA[I made a comment in Reddit and I want to blog it here as well. Because my sentiment toward someone claim that we have unnecessary complexity…]]></description><link>https://chrisza.me/complexity/</link><guid isPermaLink="false">https://chrisza.me/complexity/</guid><pubDate>Sun, 25 Jul 2021 05:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I made a comment in Reddit and I want to blog it here as well. Because my sentiment toward someone claim that we have unnecessary complexity usually goes like this.&lt;/p&gt;
&lt;p&gt;Disclaimer: All I want to say here is more often than not, people deemed system to be “too complex” based on their familiarity and skillset. And I think that is very unfair.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Re: &lt;a href=&quot;http://evrl.com/devops/cloud/2020/12/18/serverless.html&quot;&gt;Back to the ’70s with Serverless&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.reddit.com/r/programming/comments/oqxw3j/back_to_the_70s_with_serverless/h6gtw32?utm_source=share&amp;#x26;utm_medium=web2x&amp;#x26;context=3&quot;&gt;Original reply&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I don’t really understand how managing VPS can be simpler than Serverless. What is the definition of complex?&lt;/p&gt;
&lt;p&gt;I can deploy my apps into Serverless within few minutes. And with VPS, I need to ensure I have the right version of Linux, dependencies installed with correct versions and proper resources (CPU, Ram, Disk) + uptime monitoring.&lt;/p&gt;
&lt;p&gt;I can manage VPS dependencies and stuff with some tools like Ansible, but how it that provide a better feedback loop? It’s so slow compared to Serverless.&lt;/p&gt;
&lt;p&gt;If you are already familiar with all Linux commands, concepts, and toolsets, everything I mentioned will be easy and “feel simple” to you. But that is &lt;a href=&quot;https://www.infoq.com/presentations/Simple-Made-Easy/&quot;&gt;easy, not simple&lt;/a&gt;. And it applied only to you.&lt;/p&gt;
&lt;p&gt;Even if we don’t go with Rich Hickey’s definition of simple, you still need to take a layman’s perspective if you want to claim a system is easy. I would like to see how fast junior developers can get VPS up and running with the same quality as Serverless.&lt;/p&gt;
&lt;p&gt;Sometimes I feel like an old programmer complaint goes like this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Senior: Back in the day, everything was simpler with stack X&lt;/li&gt;
&lt;li&gt;Junior: That is interesting. Let me learn X.&lt;/li&gt;
&lt;li&gt;Senior: You need to read this big book, and it takes a year of experience&lt;/li&gt;
&lt;li&gt;Junior: Wait, but how can X be simpler than new shiny toy A that I can learn and get it run within 10 minutes?&lt;/li&gt;
&lt;li&gt;Senior: You lack fundamental young Padawan. Once you dig into X long enough, you will understand how good X is.&lt;/li&gt;
&lt;li&gt;Junior: Wait, are we still talk about how X is simpler than A?&lt;/li&gt;
&lt;li&gt;Senior: Kid these days… so entitled and soft.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Maybe this is a classic case for the (curse of knowledge)[https://en.wikipedia.org/wiki/Curse&lt;em&gt;of&lt;/em&gt;knowledge].&lt;/p&gt;
&lt;p&gt;By the way, I am also a fan of Erlang/Elixir ecosystem, but I strongly disagree with “running Erlang cluster is simpler than Kubernetes”. For a start, there are very few resources online. I figured out how to do Elixir code hot-reload using &lt;a href=&quot;https://github.com/edeliver/edeliver&quot;&gt;edeliver&lt;/a&gt; and I cannot even find out how to do some simple stuff until I dig into some kind of hidden Webboard and mailing group.&lt;/p&gt;
&lt;p&gt;Funny enough end, I found it easier for someone like me, without years of OTP experience, to run Elixir apps in Kubernetes cluster and achieve hot-reload from K8S stack. Of course, this is conceptually sucks since I am fully aware that OTP is much more potent and powerful than Kubernetes in many things. But in the end, I have some apps to deploy.&lt;/p&gt;
&lt;p&gt;I want to point out that the resource I found when I googled “Hot Code Reload Deployment Elixir” ended up &lt;a href=&quot;https://gvaughn.github.io/2020/05/17/why_hot_deploys_are_cool.html&quot;&gt;recommend me to not fully rely on it&lt;/a&gt;. So while I agree that Erlang and OTP is technically way more powerful and more amazing than new shiny toy such as Kubernetes, I strongly disagree with it being simpler.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Toward solving interruption in Programming]]></title><description><![CDATA[Recently there are developers and creative vocal about how interruption ruin their work. There are many articles about flow state and funny…]]></description><link>https://chrisza.me/interruption-attitude/</link><guid isPermaLink="false">https://chrisza.me/interruption-attitude/</guid><pubDate>Fri, 11 Jun 2021 05:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently there are developers and creative vocal about how interruption ruin their work.&lt;/p&gt;
&lt;p&gt;There are many articles about &lt;a href=&quot;https://www.bbc.com/worklife/article/20190204-how-to-find-your-flow-state-to-be-peak-creative&quot;&gt;flow state&lt;/a&gt; and &lt;a href=&quot;https://heeris.id.au/2013/this-is-why-you-shouldnt-interrupt-a-programmer/&quot;&gt;funny cartoon&lt;/a&gt; on how interruption ruin serious thinking work. There is even a &lt;a href=&quot;https://daedtech.com/programmers-teach-non-geeks-the-true-cost-of-interruptions/&quot;&gt;passive-aggressive piece&lt;/a&gt; talking about teaching non-geeks cost of interruption.&lt;/p&gt;
&lt;p&gt;As a developer, while I agree that interruption can ruin work to some degree (which differ for each people), I don’t think the passive-aggressive stance most programmer take is productive nor helpful.&lt;/p&gt;
&lt;p&gt;First of all, according to my experience in many companies both as a full-time developer, management and consultant, I want to say this out loud:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;No one really want to interrupt your work&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;There is no conspiracy where every non-geek role held a secret meeting to figure out how to make programmer life most miserable and decide that throwing non-sense interruptions every hour is the best course of action.&lt;/p&gt;
&lt;p&gt;No, that is not the case.&lt;/p&gt;
&lt;p&gt;Every interruption has its own reason. Your teammate has some problem they want to solve, and they think you can help.&lt;/p&gt;
&lt;p&gt;That’s why they come to you. So tell people to stop interrupting will not work, especially if the problem is a shared problem. For example, what happens if sales are about to commit to some scope but don’t know the feasibility? Would you want sales to stop interrupting the programmer and figure this out on their own? That obviously will make the matter worse.&lt;/p&gt;
&lt;p&gt;There are some necessary interruptions and some not. You cannot just tell people to leave you alone to solve the problem. After all, you don’t get paid to solve your personal problem. It is always a shared problem. Everyone in the team is at stake. Cutting interruptions and work in a silo is not a solution.&lt;/p&gt;
&lt;p&gt;I believe the solution is to let them know how to interact with you. You have to set your own boundary.&lt;/p&gt;
&lt;p&gt;For example, you can say if anything urgent, please call me instead of a message. You can say that if you leave a message, I will read it within a day. If you ping me directly, I will respond every hour. You can also block your flow time on the calendar.&lt;/p&gt;
&lt;p&gt;Those are all valid boundaries to set.&lt;/p&gt;
&lt;p&gt;And at first, people might mistake the urgency of the situation. Some people might call you on the tiny issue they have. That is fine if it happened the first time. You take that opportunity and categorize this issue. You tell them that next time this type of issue is not as urgent as they might think. If it happens repeatedly, we have to talk with a team about urgency and tradeoffs since interruption has some cost.&lt;/p&gt;
&lt;p&gt;In short, rather than complaining about how others are wrong, it’s better to tell what’s right. We should let others know how to interact with us productively.&lt;/p&gt;
&lt;p&gt;And there might be some constraints that we don’t know. For example, we might legally bind to report production issues within a specific amount of time. We can work together to solve that constraint.&lt;/p&gt;
&lt;p&gt;But first, you need to believe that people are not out there to get you. As I said, there is no conspiracy of non-geeks. Everyone, geeks or non-geeks, just wants to get the best results. We might have a different opinion on how to get it. That’s true. They have a reason, strong or weak, they have a reason.&lt;/p&gt;
&lt;p&gt;And shutting others of is not going to solve anything. It is a bad stance to take on the interruption problem. It is much better to take a stance of&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;I understand why you need to interrupt me. However, this is not productive for all of us. Can we do it differently?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;And that is my rant for today.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Persona-based architecture]]></title><description><![CDATA[We developers always dream about a maintainable system. We longed for a simple system that is easy to work with. It should be easy to change…]]></description><link>https://chrisza.me/persona-based-architecture/</link><guid isPermaLink="false">https://chrisza.me/persona-based-architecture/</guid><pubDate>Wed, 14 Apr 2021 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;We developers always dream about a maintainable system. We longed for a simple system that is easy to work with. It should be easy to change, debug and observe.&lt;/p&gt;
&lt;p&gt;We created a concept called clean code and clean architecture in order to pursue that dream.&lt;/p&gt;
&lt;p&gt;What is clean architecture? There is a definition defined by &lt;a href=&quot;https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html&quot;&gt;Uncle Bob&lt;/a&gt;. It must be independent of a framework. It must be independent of UI, etc.&lt;/p&gt;
&lt;p&gt;Everything seems good. Since we have a solid ground on what a clean code is, we should already achieve a maintainable codebase, right?&lt;/p&gt;
&lt;p&gt;Surprisingly, whenever I had a conversation with developers who work with those clean architecture patterns. I asked them how it is in practice. Does the team become more effective? Do the team happy with the codebase?&lt;/p&gt;
&lt;p&gt;The answer usually goes like this.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Well, it is not really easy for a common developer. They need to learn multiple concepts and take a lot of time to become effective.”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Wait. In a quest to chase a maintainable codebase, we accidentally created a codebase that is hard to maintain, did we?&lt;/p&gt;
&lt;h3&gt;Practical maintainability&lt;/h3&gt;
&lt;p&gt;Personally, I have no issue working with great architectural patterns such as &lt;a href=&quot;https://en.wikipedia.org/wiki/Hexagonal_architecture_(software)&quot;&gt;Hexagonal Architecture&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Command%E2%80%93query_separation#Command_query_responsibility_segregation&quot;&gt;CQRS&lt;/a&gt;, &lt;a href=&quot;https://facebook.github.io/flux/&quot;&gt;Flux&lt;/a&gt; &lt;a href=&quot;https://martinfowler.com/articles/microservices.html&quot;&gt;Microservices&lt;/a&gt;. I learned about this pattern for quite a while.&lt;/p&gt;
&lt;p&gt;But when I work in a team of 10 developers, does it matter if I am the only one out of nine who knows about it?&lt;/p&gt;
&lt;p&gt;We know that a maintainable codebase must have dependency inversion, low coupling, high cohesion, follow SOLID principle, follow DRY principle, etc. Surprisingly, when we follow all the maintainable codebase rules and at the end, the team might find it hard to work with.&lt;/p&gt;
&lt;p&gt;What happens? Are we chasing an illusion of a maintainable codebase? Are we a bunch of sheep that blindly follow the shepherd rules with false hope of promised maintainable land?&lt;/p&gt;
&lt;p&gt;I think when we follow all those rules and theories, we achieve theoretical maintainability. Any codebase with all those characteristics should be maintainable, in theory.&lt;/p&gt;
&lt;p&gt;In practice, I think maintainability should simply be defined like this.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A maintainable codebase is a codebase that a team can effectively work with.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That’s it—such a simple definition.&lt;/p&gt;
&lt;p&gt;All those rules about dependency inversion, coupling, cohesion, SOLID, DRY are just tools to achieve the dream. We should understand those concepts in order to create a maintainable codebase. But they should never be viewed as a goal in itself.&lt;/p&gt;
&lt;p&gt;Is the CQRS codebase maintainable? If a team finds it easy to work with, then yes.&lt;/p&gt;
&lt;p&gt;In the end, the maintainability of any codebase never depends on whether you do things in the right way or follow best practices. While it helps, it is not a deciding factor.&lt;/p&gt;
&lt;p&gt;It all depends on &lt;strong&gt;humans&lt;/strong&gt;. Yes, those fuzzy emotional unreliable humans.&lt;/p&gt;
&lt;h3&gt;Working with humans&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Once, a software architect said this to me: Software Architect is a very special role. We are responsible for the overall quality of the codebase. We know the quality of the codebase depends on developers. And yet, we don’t have any power to hold those developers accountable. We can only design, convince, and maybe set some rules.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A path toward maintainable architecture is such a vague path. Since it all depends on humans, there is no correct answer. No matter what you do, you might be right, or you might be wrong.&lt;/p&gt;
&lt;p&gt;Software engineers are familiar with working with a binary concept. Code should either compiled or error. Code should either pass a test or fail a test. Everything should be consistent and reproducible.&lt;/p&gt;
&lt;p&gt;On the other hand, humans are not consistent at all. Today a human can love one thing, and tomorrow they might hate it. Today they might say our codebase is the best codebase ever. In the next few months they might want to rewrite everything from scratch.&lt;/p&gt;
&lt;p&gt;How can we work with human, &lt;a href=&quot;https://academic.oup.com/ilarjournal/article/31/2/3/657422&quot;&gt;a creature full of inconsistency&lt;/a&gt; and nuisance?&lt;/p&gt;
&lt;p&gt;I would like to introduce you to two fields that are pretty much in the same place.&lt;/p&gt;
&lt;p&gt;The first field is the design field. Designers don’t have direct control over users, yet they need to design both UX and UI to guide users to do the right thing. Their career pretty much depends on the user doing the right thing while still happy with the overall experience.&lt;/p&gt;
&lt;p&gt;The second field is the economic. Economic planners never have direct control over the population behavior, yet they need to create a system that incentivizes people to a certain economic direction. Otherwise, the whole nation failed.&lt;/p&gt;
&lt;p&gt;I am always fascinated by behavioral economics. How can you introduce a policy? How will people react to that? What will be the consequence?&lt;/p&gt;
&lt;p&gt;There are many tools and ways of thinking from those fields that we can apply to software architecture. I can name many. Design thinking, User testing, Unintended consequence, Game Theory, etc. All those tools are applicable to software architecture.&lt;/p&gt;
&lt;p&gt;And today, I will write about a tool that I steal from the design field: &lt;strong&gt;Persona&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Persona&lt;/h3&gt;
&lt;p&gt;According to Wikipedia, here is a definition of persona&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A persona (also user persona, customer persona, buyer persona) in user-centered design and marketing is a fictional character created to represent a user type that might use a site, brand, or product in a similar way&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Basically, whenever designers design anything, they create a fictional character of their user. And we can adopt this practice of creating a fictional character of maintainers.&lt;/p&gt;
&lt;p&gt;There are many ways to create a persona in product development. To get back to software architecture, I think persona of maintainers should consist of two parts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Context. What is the experience level of our fellow developers? What is their role? What will they do on a day-to-day basis?&lt;/li&gt;
&lt;li&gt;Expectation. Based on context and our design, what are our expectations?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The context helps you empathize with the capability, limitation, and habit of maintainers. That will be an architectural design constraint. On the other hand, expectation helps you understand what you expect from each.&lt;/p&gt;
&lt;p&gt;For example, let say we want to adopt microservice architecture. Here is a persona example:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/29476eef551e2dc9d5adb159b9b892f2/bce72/Personas.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 86.0759493670886%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACF0lEQVQ4y41USYpqQRAs8BqeQATBvQsP4wnceABXLj2ElxDFeZ4VBxzaeWwnWnE2PlFQYj9bvglJ5ZuioiIjn+j3+3C5XLDb7WAsFguZ2rjdbrjf7zIZz/VzCL/fD4vFAr1eL1+4XC5oNBpot9sYjUbo9Xo4HA6/PvoL6AFotVqh0+kghIDb7ZY3u90uvF4vgsEgAoEAms2mBG61WlitVr8YahkLm80Gs9kMo9EIj8cjH85mM+RyOVQqFeTzeSSTScm60+m8yKEFFVrKu90Og8EAX19fmM/nOJ1OOB6Pv47JmpoytcDier1CJV/gSjbxeByZTAb1eh2lUgnFYhGFQkEy5jXrdDotpSCJh4bPWigWfCmVSknQaDSKWCyGSCQiwbhZrVZ7rNPpFPv9HufzWab4Swt2N5FIIJvNSiAyISilWC6XEoQ6s+bKpP0okVB68KjP+nA3Wogaqt0/CfGpv7RWeZfi5+dHHomeY2w2G5n/A31HQLCTNDcnRY0YNaHoNDK9yJo2Go/HL0bWgguHwwGDwSABfT7fo8usw+GwZE+T0z4EHQ6HUu+3gCaTSY4d0+l0ypvsIj/k+mzeT7QVtEi1WkW5XAb1ZFfJhj7kyp8EZ5tjx+Q1V7KlJM+mfumyCm7C49J7KjnP/FHQ7MrooVBI6krQ9XotDS6UB9XoMfiAjeGP4Pv7W6YytKrVNc3MejKZYLvd4h++oN+DDCP1EAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Persona&quot;
        title=&quot;Persona&quot;
        src=&quot;/static/29476eef551e2dc9d5adb159b9b892f2/f058b/Personas.png&quot;
        srcset=&quot;/static/29476eef551e2dc9d5adb159b9b892f2/c26ae/Personas.png 158w,
/static/29476eef551e2dc9d5adb159b9b892f2/6bdcf/Personas.png 315w,
/static/29476eef551e2dc9d5adb159b9b892f2/f058b/Personas.png 630w,
/static/29476eef551e2dc9d5adb159b9b892f2/bce72/Personas.png 633w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;We might start with either the context side or the expectation side. We might start by asking ourselves: here what I want from our maintainers. What kind of people are they? Or you might start by: here are our maintainers. What can I expect? It works both ways.&lt;/p&gt;
&lt;p&gt;Just by writing down persona, we make a connection between maintainer and expectation clearer and more realistic.&lt;/p&gt;
&lt;h3&gt;Persona validation: Context side&lt;/h3&gt;
&lt;p&gt;Once you have persona, you need to validate your persona.&lt;/p&gt;
&lt;p&gt;It is very simple. We just look at actual maintainers and see if they fit the description.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6c76511d006d881c3a37fbe2f5387bb3/4597d/Persona%20testing%20context.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8klEQVQoz62RWYqEQBBExQOIR/BQ3sAfz+EBVRR3RVHELzdccI/BhB5mbKd7PjogyaKgovJlMLIsg+d5TNOEdV2RZRlVnudI0xRFUWDfd6rjOHDq7I/zVYwoimAYBk3TYFkW+L6PIAgQRRH1uq5/PfhpemsoCAI4joOiKHThOA5c16XueR66rsO2bfTZOeUrMzJkWZYmlCSJHpimCV3XYds2DMOAZVnQNA2qqiIMw/fIbduiLEva3zAMiOOYcJMkIeRzBVVVYRxH9H3/hP5keN3PiTbP83c/w7rqJfI1wTs9EP+V8jW5v+rdZLfIn9DHDb8AxPz3AUXHxSAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Persona testing context&quot;
        title=&quot;Persona testing context&quot;
        src=&quot;/static/6c76511d006d881c3a37fbe2f5387bb3/f058b/Persona%20testing%20context.png&quot;
        srcset=&quot;/static/6c76511d006d881c3a37fbe2f5387bb3/c26ae/Persona%20testing%20context.png 158w,
/static/6c76511d006d881c3a37fbe2f5387bb3/6bdcf/Persona%20testing%20context.png 315w,
/static/6c76511d006d881c3a37fbe2f5387bb3/f058b/Persona%20testing%20context.png 630w,
/static/6c76511d006d881c3a37fbe2f5387bb3/4597d/Persona%20testing%20context.png 631w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In this case, we identify the gap between the actual maintainers and our ideal maintainers. Mark doesn’t have 6 years of experience, but he understands distributed systems.&lt;/p&gt;
&lt;p&gt;Once all gaps are clearly identified, we have many choices to deal with them.&lt;/p&gt;
&lt;p&gt;The first clear choice is to adapt our architecture to be more realistic. If we know the maintainer cannot maintain this architecture, we should not insist on building it.&lt;/p&gt;
&lt;p&gt;For another choice, we can also provide a training and capability improvement program. We can switch some team members around with other projects. We can hire someone from the outside that matches a requirement.&lt;/p&gt;
&lt;p&gt;We can even set a standard and career development. We can bring your persona to all those junior and say: We want you to be this person within a year. Once you obtain these, we can talk about promotion and next step in your career.&lt;/p&gt;
&lt;p&gt;All of the above are some examples of what we can do once gaps are clearly identified.&lt;/p&gt;
&lt;p&gt;I hope you now see the value of writing down persona.&lt;/p&gt;
&lt;p&gt;There is one thing I want you to be prepared. Seeing these gaps might lead to some hard conversations, and we might not feel comfortable about these.&lt;/p&gt;
&lt;p&gt;All I can say is that this approach works much better than design for the best and pray for the rest approach. It works much better than blindly adopting microservice, and in the end, all maintainers just want to quit or kill the project.&lt;/p&gt;
&lt;p&gt;I heard this kind of story so many times. Architecture implements fancy architecture and creates a big gap between what should happen and what actually happens.&lt;/p&gt;
&lt;p&gt;Those gaps will not go away just because we don’t think about it. So let us be mentally prepared and confront those gaps heads-on.&lt;/p&gt;
&lt;h3&gt;Persona validation: Expectation side&lt;/h3&gt;
&lt;p&gt;As we adjust our context, we still might be wrong about expectations.&lt;/p&gt;
&lt;p&gt;For example, we might think that our maintainers can independently create a new feature. We might think that a senior developer will be able to facilitate post-mortem.&lt;/p&gt;
&lt;p&gt;In the end, we might be wrong.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cc0d79b0250b737f6907d14e865fd913/76cea/Persona%20testing%20Expectation.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.9746835443038%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0ElEQVQoz61QOQ6DQAzcgg/xFr7D6yhpQNBwg0DcoqDknMSWFkVhkzQZaeS1vB6PLQzDgGVZIJRliaZpUNc1hmHAsixY15W5bRtHifM8oYLQNA2maXKSJAmLSWGKxKIoUFUV0jS9BknRd4onoOs65nmG53nwfR+u6zIdx0EQBMiyDHmeI4oitG17CSod2rbNzugTOYjj+GIYhux4HEd0XcdxmiZ2SXnf9/ymbWgQUfy6iawdx6GMt5X3fefip5t8G6RcWTa8NqsEPw27OcSf8QD3JmBQDrm3igAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Persona testing context&quot;
        title=&quot;Persona testing context&quot;
        src=&quot;/static/cc0d79b0250b737f6907d14e865fd913/f058b/Persona%20testing%20Expectation.png&quot;
        srcset=&quot;/static/cc0d79b0250b737f6907d14e865fd913/c26ae/Persona%20testing%20Expectation.png 158w,
/static/cc0d79b0250b737f6907d14e865fd913/6bdcf/Persona%20testing%20Expectation.png 315w,
/static/cc0d79b0250b737f6907d14e865fd913/f058b/Persona%20testing%20Expectation.png 630w,
/static/cc0d79b0250b737f6907d14e865fd913/76cea/Persona%20testing%20Expectation.png 799w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;When you have expectations and context written down, it opens up an opportunity to improve.&lt;/p&gt;
&lt;p&gt;Maybe our maintainers need more training and knowledge than we initially thought. Perhaps the way we separate our domain does not enable our maintainer to contribute. Maybe our maintainers are stuck in some legacy process or legacy code that we don’t know.&lt;/p&gt;
&lt;p&gt;There are many possible causes and possible solutions. As in product development field said, we will never get our assumption right until we launch a product into the market.&lt;/p&gt;
&lt;p&gt;And that is ok.&lt;/p&gt;
&lt;p&gt;When we know exactly where we wrong, we can make it right.&lt;/p&gt;
&lt;p&gt;It is better to say&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;I thought microservice was going to allow the team to be autonomous. It turns out that they still depend on many external services. We need to bring those services back together and rethink how we draw our domain boundaries.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;than&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;We tried, and Microservices just does not fit us.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Also, it is better to say&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;I thought a programmer with 6 years of Java development experience which demonstrates capability in OOP should be able to handle this. That is where I am wrong. It seems that the Java experience is irrelevant here. We need someone who understands how the distributed system works to maintain this system.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;than&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;We need better programmers to maintain this system. Please hire only top class programmers.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And personas allow you to say these types of sentences with confidence.&lt;/p&gt;
&lt;p&gt;Whether the path forward is to change our architectural decision or improve maintainers’ capability, it is much better to be explicit.&lt;/p&gt;
&lt;p&gt;And it is ok if you don’t optimize your architecture for maintainers, as long as you make it clear why and what do you expect instead.&lt;/p&gt;
&lt;p&gt;With persona, you have a clear message to all stakeholders about what you expect. You can have a meaningful conversation on how to adjust according to hiring and capability limitation.&lt;/p&gt;
&lt;h2&gt;Side Benefits&lt;/h2&gt;
&lt;p&gt;Aside from a software architecture perspective, having a clear persona can be a tool to connect many aspects of software engineering management.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hiring - What is a job description? Persona!&lt;/li&gt;
&lt;li&gt;Career growth - How shall we set junior developer expectations? Persona!&lt;/li&gt;
&lt;li&gt;Capability building - What kind of training should we provide this year? Persona!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I was in a position of tech lead who responsible for both management and architecture, and having a persona in mind helps a lot.&lt;/p&gt;
&lt;h2&gt;Endnote&lt;/h2&gt;
&lt;p&gt;When it comes to practical maintainability, it’s all about real humans rather than rules, processes, and practices.&lt;/p&gt;
&lt;p&gt;In the software engineering field, we mainly focus on binary and concept. In some other fields, they have many tools to deal with human inconsistency. We can learn a lot from them.&lt;/p&gt;
&lt;p&gt;To be successful in software architecture design, you rely on humans. Persona is one of many tools to help you layout dependency between your structure and human behavior. Persona validation helps you understand how your design actually works in practice.&lt;/p&gt;
&lt;p&gt;Once you have everything visualize, you have the power to solve it.&lt;/p&gt;
&lt;p&gt;I believe that just like every other type of architect, a software architect is supposed to solve a human problem. Architecture should serve human needs, not the other way around.&lt;/p&gt;
&lt;p&gt;Thanks for reading!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Code quality without familiarity]]></title><description><![CDATA[หลายๆ ครั้งผมพบว่าโปรแกรมเมอร์มักจะตัดสินคุณภาพของโค้ดจากปัจจัยเพียงแค่ว่า Pattern ที่เขาใช้ตรงกับที่เราใช้มั้ย เช่น ถ้าสมมติเราทำโค้ด MVC…]]></description><link>https://chrisza.me/code-without-familiarity/</link><guid isPermaLink="false">https://chrisza.me/code-without-familiarity/</guid><pubDate>Sat, 06 Mar 2021 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;หลายๆ ครั้งผมพบว่าโปรแกรมเมอร์มักจะตัดสินคุณภาพของโค้ดจากปัจจัยเพียงแค่ว่า Pattern ที่เขาใช้ตรงกับที่เราใช้มั้ย&lt;/p&gt;
&lt;p&gt;เช่น ถ้าสมมติเราทำโค้ด MVC อาจจะมีทีมนึงกำหนดกฎไว้แบบนี้&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Controller ห้ามมี Logic&lt;/li&gt;
&lt;li&gt;ใน View ให้เข้าถึง Model แล้วถ้าอยากแสดงอะไรพิเศษให้เพิ่มใน Model&lt;/li&gt;
&lt;li&gt;Model เป็นที่รวม Logic ส่วนมาก รวมถึงการเข้าฐานข้อมูล&lt;/li&gt;
&lt;li&gt;ให้ใช้ Dependency Injection ในการทำให้ Unit test ได้&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ทีนี้เวลาเราไปเจอโค้ดของอีกทีมที่ใช้ Pattern อีกอย่างกับที่เราคุ้นชิน เช่น&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;หากต้องการแสดงอะไรพิเศษให้สร้าง Presenter หรือ ViewModel ขึ้นมา&lt;/li&gt;
&lt;li&gt;Controller มี Logic ในการตรวจสอบ Request ได้&lt;/li&gt;
&lt;li&gt;ให้ใช้ Stub ในการทำให้ Unit test ได้&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;เราก็อาจจะคิดว่าโค้ดนั้นห่วยเพราะมันไม่ถูกต้องตามที่เราเรียนมาหรือคุ้นชินมา&lt;/p&gt;
&lt;p&gt;ผมมองว่าการใช้ความคุ้นชินแบบนี้เป็นตัวชี้วัดว่าโค้ดมีคุณภาพมั้ยที่ไม่ดีมากๆ โค้ดหลายตัวมีคุณภาพที่ดีโดยไม่จำเป็นต้องใช้ Design Pattern ที่เรารู้จัก ตัวเราเองก็ไม่สามารถไปอ่านหรือทำความเข้าใจทุกๆ Design Pattern บนโลกนี้ได้&lt;/p&gt;
&lt;p&gt;ผมมีโอกาสอ่านโค้ดของ Candidate ทำงานกับ Legacy code มาเยอะ มีโอกาสเขียนโปรแกรมมาหลากหลายภาษา แต่ละภาษาแต่ละโค้ดเองก็มีทั้งสไตล์, Framework, Design decision, Best practices ที่แตกต่างกัน&lt;/p&gt;
&lt;p&gt;ด้วยประสบการณ์แบบนี้ ผมไม่อยู่ในฐานะที่สามารถบอกได้ว่าโค้ดไหนแย่หรือดีจากเพียงแค่เพราะมันคุ้นตามั้ย แค่เปลี่ยนภาษาก็จบเห่แล้ว ทุกอย่างต้องลบทิ้งหมด อย่างเช่น&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;วันที่ผมเปลี่ยนจาก Angular มาเป็น React งี้ ผมไม่สามารถบอกได้ละว่าโค้ดที่ดีต้องมี Dependency injection ใน React มันไม่เหมาะเอามากๆ&lt;/li&gt;
&lt;li&gt;วันที่ผมใช้เทคโนโลยี Web API กับ MVC เพื่อเขียน C# JSON API Application ก็มีความแตกต่างมากในแง่ของ Entity ที่ใช้ในระดับ API ผูกกับ Object ขนาดไหน อันนึงออกแบบบนฐานของ Coupling Entity, Response กับอีกอันคือ Decoupling เลย&lt;/li&gt;
&lt;li&gt;ตอนผมทำ Rails, C# MVC, Phoenix ถึงแม้จะเป็น MVC เหมือนกันแต่สไตล์ก็แตกต่างกันมาก&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ผมจึงอยากแชร์ว่าปกติแล้วผมดูอย่างไรว่าโค้ดไหนดีหรือโค้ดแบบไหนแย่ โดยไม่ขึ้นกับความคุ้นตาของตัวเอง&lt;/p&gt;
&lt;p&gt;งั้นเรามาเริ่มกันเลยดีกว่า&lt;/p&gt;
&lt;h2&gt;Definition&lt;/h2&gt;
&lt;p&gt;กฎข้อแรกที่สำคัญที่สุดของโค้ดที่ดีสำหรับผมคือ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;โค้ดที่ดีสำหรับผมคือมีนิยามของคำศัพท์ที่ชัดเจน และทำตามนิยามนั้น&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ผมยกตัวอย่าง Rails บอกว่า &lt;a href=&quot;https://guides.rubyonrails.org/action_controller_overview.html&quot;&gt;Controller&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Action Controller is the C in MVC. After the router has determined which controller to use for a request, the controller is responsible for making sense of the request, and producing the appropriate output. Luckily, Action Controller does most of the groundwork for you and uses smart conventions to make this as straightforward as possible.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;แปลว่า Controller มีหน้าที่จัดการ Request และจัดการ Output ถ้าเรานิยามไว้แบบนี้ แปลว่าโค้ดที่เอา Controller ไปทำอย่างอื่นคือไม่ดีละ&lt;/p&gt;
&lt;p&gt;แปลว่าผมอ่านโค้ด Rails ผมจะไม่อยากเห็น Controller ที่รู้เรื่องธุรกิจภายในมากกว่าการจัดการ Request/Response&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ruby&quot;&gt;&lt;pre class=&quot;language-ruby&quot;&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TransactionController&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token method-definition&quot;&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;TooLowTransactionError&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token symbol&quot;&gt;:amount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# บรรทัดนี้คือไม่ดี เพราะมันรู้ว่าในธุรกิจของเราห้ามสร้าง Transaction ต่ำกว่า 20 บาท&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# ....&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ซึ่งแปลว่าถ้ามีใครก็ตามกำหนด Definition ของ Controller ต่างไปจากเรา เราอาจจะเอ๊ะในครั้งแรกว่าทำไมถึงกำหนดต่างกับมาตรฐานสากลล่ะ แต่ไม่ได้แปลว่าโค้ดไม่ดีนะครับ&lt;/p&gt;
&lt;p&gt;สมมติใครซักคนกำหนดว่า Controller มีหน้าที่ประสานงานระหว่าง Model ในกรณีที่ API นั้นต้องใช้มากกว่า 1 Model แล้วเขาเขียนตามนั้น นี่ก็คือถือว่ายังเป็นโค้ดที่ดีในแง่ของ Honest to definition อยู่ครับ&lt;/p&gt;
&lt;p&gt;ส่วนการกำหนด Definition แบบนี้มันเหมาะหรือไม่ จะทำให้ Controller บวมเกินเหตุมั้ย อันนั้นอีกเรื่องนึง ต้องไปดูตามบริบทของระบบที่พัฒนาอีกทีนึง&lt;/p&gt;
&lt;p&gt;หรืออย่างเช่นใน MVC แบบ Rails ตัว Model จะเข้าถึงฐานข้อมูลได้ ก็จะเขียนบอกไว้ใน Definition ของ Model แต่ถ้าเราเริ่มทำ Hexagonal Architecture เราอาจจะมี Repository ที่เข้าถึงข้อมูลอีกที ไม่ให้ Model เขาถึงฐานข้อมูลโดยตรง&lt;/p&gt;
&lt;p&gt;ทั้งสองอย่างผมมองว่าไม่ได้มีอันไหนเหนือกว่าอันไหน ขึ้นกับบริบทของระบบ&lt;/p&gt;
&lt;p&gt;แต่สิ่งที่ดีเสมอโดยไม่ขึ้นกับบริบท คือคุณมีนิยามที่ชัดเจนว่าแต่ละคำศัพท์แปลว่าอะไร และคนร่วม Contribute เข้าใจตรงกันไม่สับสน สามารถทดสอบได้ง่ายๆ คือ สมมติพูดถึง Controller ถ้าผมเป็นสมาชิกใหม่เข้าไปถามว่า สิ่งนี้ควรอยู่ใน Controller มั้ย ทุกคนควรจะตอบได้ตรงกัน&lt;/p&gt;
&lt;p&gt;สิ่งที่แย่โดยโดยไม่ขึ้นกับบริบท คือ นิยามที่ว่าแต่ละคำศัพท์คืออะไรมันกำกวม คนร่วมทีมอธิบายไม่ได้ว่า Model แปลว่าอะไร Controller แปลว่าอะไร ไปถามเจ้าตัวคนเขียนคนแรกก็ตอบไม่ได้ชัดเจนว่านิยามอะไร บอกได้แค่ประมาณนั้นอ่ะประมาณนี้อ่ะ แต่ละคนในทีมตอบไม่ตรงกันซักคน&lt;/p&gt;
&lt;p&gt;อันนี้ผมมองว่าแย่เสมอในทุกบริบทของระบบ&lt;/p&gt;
&lt;h2&gt;Consistency&lt;/h2&gt;
&lt;p&gt;ต่อเนื่องจากนิยาม ความคงเส้นคงวาก็สำคัญ&lt;/p&gt;
&lt;p&gt;ผมขอยกย่อหน้าเก่าขึ้นมา&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;หรืออย่างเช่นใน MVC แบบ Rails ตัว Model จะเข้าถึงฐานข้อมูลได้ ก็จะเขียนบอกไว้ใน Definition ของ Model แต่ถ้าเราเริ่มทำ Hexagonal Architecture เราอาจจะมี Repository ที่เข้าถึงข้อมูลอีกที ไม่ให้ Model เขาถึงฐานข้อมูลโดยตรง&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ถ้าสมมติเราวางนิยามไว้แบบนี้ แต่บางทีเวลาเห็น Model บวมเราก็สร้าง Repository ขึ้นมา บางทีก็ใช้ บางทีก็ไม่ใช้ ไม่มีความคงเส้นคงวา อันนี้ก็ถือว่าไม่ดี&lt;/p&gt;
&lt;p&gt;ไม่ว่าจะทำโค้ดในภาษาโบราณแค่ไหนไปจนถึงใหม่แค่ไหน ความคงเส้นคงวาของคำศัพท์และ Layering คือดีครับ และข้อยกเว้นยิ่งมีมากคือไม่ดี&lt;/p&gt;
&lt;p&gt;หรือสมมติถ้าเราตกลงกันแล้วว่าเราจะใช้ &lt;code class=&quot;language-text&quot;&gt;map&lt;/code&gt; เสมอ เราก็จะใช้มันเสมอ ไม่ใช้ for loop และตรงข้าม ถ้าเราตกลงกันแล้วว่าจะใช้ for loop เสมอไม่ใช้ &lt;code class=&quot;language-text&quot;&gt;map&lt;/code&gt; ก็ควรจะคงเส้นคงวากับสิ่งนั้น&lt;/p&gt;
&lt;p&gt;ถ้าจะใช้ผสมกันก็ต้องบอกได้ว่าตอนไหนใช้ &lt;code class=&quot;language-text&quot;&gt;map&lt;/code&gt; ตอนไหนใช้ loop ที่ชัดเจนเข้าใจตรงกัน&lt;/p&gt;
&lt;p&gt;การมีข้อยกเว้นได้มั้ย ได้ ถ้า Justify the cost ได้ แต่ถ้ามีไปเฉยๆ โดยไม่มีต้นสายปลายเหตุอธิบายได้ดีว่าทำไมถึงเกิดข้อยกเว้น อันนี้ผมมองว่าแย่โดยไม่เกี่ยวกับว่าออกแบบยังไง&lt;/p&gt;
&lt;h2&gt;Appropriate coupling&lt;/h2&gt;
&lt;p&gt;โค้ดที่ดีอีกอย่างนึงคือ เราเข้าใจว่าโค้ดแต่ละบรรทัดแก้ไขแล้วมีสิทธิ์กระทบอะไรบ้าง&lt;/p&gt;
&lt;p&gt;ผมยกตัวอย่างจากบทความที่ผมเขียนเองเรื่อง &lt;a href=&quot;https://dev.to/chrisza4/code-clean-13kk&quot;&gt;โค้ดเหมือนจะ Clean&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ruby&quot;&gt;&lt;pre class=&quot;language-ruby&quot;&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Invoice&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token method-definition&quot;&gt;&lt;span class=&quot;token function&quot;&gt;pay_invoice&lt;/span&gt;&lt;/span&gt;
    make_sure_invoice_approved
    create_transaction_entry
    decrease_company_total_balance
    record_tax_deduction
  &lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ถ้าเราเขียนแบบนี้แล้วเราไม่สามารถทำความเข้าใจได้ว่าการแก้ไข &lt;code class=&quot;language-text&quot;&gt;create_transaction_entry&lt;/code&gt; จะกระทบกับใบเสร็จส่วนไหนบ้าง จนกว่าจะขุดลึกๆ อันนี้คือแย่&lt;/p&gt;
&lt;p&gt;ดังนั้นการออกแบบให้ Dependency ระหว่างโค้ดแต่ละส่วนเคลียร์ เข้าใจง่าย ไม่พันกันเกินไป จนสามารถพูดได้เต็มปากว่าถ้าผมแก้โค้ดบรรทัดนี้ ส่วนนี้อาจจะกระทบ และส่วนนั้นจะไม่กระทบแน่นอน&lt;/p&gt;
&lt;p&gt;นั่นคือคุณลักษณะของโค้ดที่ดี โดยไม่เกี่ยวกับ Design pattern ที่ใช้&lt;/p&gt;
&lt;h2&gt;Local reasoning&lt;/h2&gt;
&lt;p&gt;คุณสมบัติสุดทายที่ผมจะพูดถึงวันนี้คือ Local reasoning หรือความสามารถในการทำความเข้าใจแยกส่วนได้&lt;/p&gt;
&lt;p&gt;ถ้าคุณเห็นโค้ดแบบนี้&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ruby&quot;&gt;&lt;pre class=&quot;language-ruby&quot;&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token method-definition&quot;&gt;&lt;span class=&quot;token function&quot;&gt;run&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# ทำทุกอย่าง&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;โปรแกรมลักษณะนี้เราต้องเข้าใจทุกอย่างที่มีในระบบก่อนที่จะแก้ไขบรรทัดนึง เพราะแต่ละบรรทัดอาจจะขึ้นกับบรรทัดอื่นได้โดยที่เราไม่รู้ จึงทำให้การทำความเข้าใจแค่ส่วนที่เราสนใจทำไม่ได้&lt;/p&gt;
&lt;p&gt;แต่ถ้าเป็นแบบนี้ล่ะ&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ruby&quot;&gt;&lt;pre class=&quot;language-ruby&quot;&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token method-definition&quot;&gt;&lt;span class=&quot;token function&quot;&gt;vat&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token variable&quot;&gt;@amount&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.07&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;เราเร่ิมเข้าใจได้ละว่าบรรทัดนี้ขึ้นกับจำนวน &lt;code class=&quot;language-text&quot;&gt;@amount&lt;/code&gt; ในคลาสของเราเท่านั้น โดยมั่นใจได้ 100% ว่าจะไม่มี Surprise ใดๆ ออกมาที่จะมากระทบกับสิ่งนี้แบบงงๆ ได้ นอกจาก Amount&lt;/p&gt;
&lt;p&gt;การที่เราสามารถทำความเข้าใจโค้ดเป็นส่วนๆ ได้ก็สำคัญ และเป็นสาเหตุนึงที่โค้ดที่ดีมักจจะมีขนาดของ Function, Method ที่เล็ก (แต่ผมว่าเราเชียร์ว่าทำฟังก์ชั่นเล็กๆ มากไปหน่อย จนหลายๆ คนเชื่อว่าฟังก์ชั่นเล็กคือดี โดยไม่เข้าใจว่าดียังไง ผมตอบให้ว่าจริงๆ เราอยากได้ความสามารถในการทำ Local reasoning)&lt;/p&gt;
&lt;h2&gt;ส่งท้าย&lt;/h2&gt;
&lt;p&gt;จริงๆ แล้วมันมีปัจจัยอีกมากมายที่ผมดู แต่วันนี้ขอเสนอ 4 ข้อครับ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Domain alignment&lt;/li&gt;
&lt;li&gt;Naming convention&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;แต่ 4 ข้อนี้เป็นข้อพื้นฐานที่ผมคิดว่าถ้าเริ่มมองโค้ดที่ไม่คุ้นชินจากมุมนี้ เราจะเข้าใจง่ายขึ้นว่าโค้ดที่ดีเป็นแบบไหน รวมไปถึงถ้าเราไปศึกษา Framework ใหม่ โดยเข้าใจว่า Framework ที่ดีจะมีคุณสมบัติพวกนี้ เราก็จะเข้าใจและคาดเดา (Deduce) Design บางอย่างได้อย่างรวดเร็วครับ อ่านแป๊ปเดียวก็อ๋อ เขาไว้ยังงี้นี่เอง ได้เร็วขึ้นครับ&lt;/p&gt;
&lt;p&gt;ถ้าชอบบทความนี้ ผมรบกวนกดให้กำลังใจใน &lt;a href=&quot;https://dev.to/chrisza4/code-quality-3pm&quot;&gt;dev.to&lt;/a&gt; ด้วยครับ บล็อกนี้ยังไม่ได้ทำระบบ Like หรือ View&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Agile upfront design]]></title><description><![CDATA[One of the greatest questions in software design is how much should we put effort into upfront design? Agile methodology has become a norm…]]></description><link>https://chrisza.me/design-upfront/</link><guid isPermaLink="false">https://chrisza.me/design-upfront/</guid><pubDate>Sat, 27 Feb 2021 05:00:00 GMT</pubDate><content:encoded>&lt;p&gt;One of the greatest questions in software design is how much should we put effort into upfront design?&lt;/p&gt;
&lt;p&gt;Agile methodology has become a norm for software development, and many people argue for not design upfront. As a result, many of us claim that Agile prevents a good software design and aims to churn out endless features and technical debts.&lt;/p&gt;
&lt;p&gt;While I don’t believe that is true, I can see where this is coming from.&lt;/p&gt;
&lt;p&gt;I want to share my approach toward architectural design.&lt;/p&gt;
&lt;p&gt;(Disclaimer: I make a lot of bash in waterfall methodology in the article. When I bash it, I bash on waterfall done wrong. I am aware that effective waterfall will not end up this way.)&lt;/p&gt;
&lt;h2&gt;Two secrets of the agile design upfront&lt;/h2&gt;
&lt;p&gt;I think the first secret of upfront design can be simply put as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Do the upfront design, not for the future, for a present moment&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Agile never says that we should not do any upfront design. But contrary to the Waterfall approach, &lt;strong&gt;Agile is very against the design for anticipated requirements&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Most of the waterfall projects have a fixed budget and timeline. Most of the time, the IT team is separate from business. Sometimes it is an internal team. Sometimes it is a vendor.&lt;/p&gt;
&lt;p&gt;Let say you work for HR, and you want software for your department. You need to state the requirement to the development team. They will tell you how long it would take.&lt;/p&gt;
&lt;p&gt;After you get your software, the development team will move to the next project and become busy for years until you get the next development queue again.&lt;/p&gt;
&lt;p&gt;What if you want a small workflow change after the project is delivered? You wait for a year since this year the development team will be focusing on manufacturing department projects.&lt;/p&gt;
&lt;p&gt;In this case, it makes perfect sense that the HR team will make a lot of guesses on what they want in the future because changes after delivery are very slow.&lt;/p&gt;
&lt;p&gt;Now you can see how Waterfall incentivizes guessing future requirements. Sometimes we even asked them to guess.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Will you need to do X in the future? Because we need to design for that upfront.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;A team which familiar with waterfall methodology, with their best intention, will likely demand a customer to think of all possible requirements upfront. So they can design and lay the foundation to make it possible to scale for the future.&lt;/p&gt;
&lt;p&gt;That is the waterfall upfront design.&lt;/p&gt;
&lt;p&gt;I saw people blaming agile for bad software design and technical debt. I worked on a waterfall project, and I’ve seen worse. A strategy pattern for one strategy. An observer pattern for one observer. A factory of factory of adapter for only a single adapter implementation. I saw it all. Everything is abstract and extensible, without a clear need. Because of … future!!&lt;/p&gt;
&lt;p&gt;Why this approach mostly fail? The harder we think about the future, the better software architecture should be, right?&lt;/p&gt;
&lt;p&gt;Here comes the second secret:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;No one can predict future requirements with certainty.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Yes. The problem lies in the fact that we basically squeeze out a future requirement from a customer in waterfall methodology.&lt;/p&gt;
&lt;p&gt;Then we design upfront for that “future,” and then blame customers when that future never comes, and we have to maintain a bloated software.&lt;/p&gt;
&lt;p&gt;You know how we talk about how hard it is to estimate a timeline for feature development, right? We know that many factors come to play. There might be a bad tech debt in the current codebase. The specs might be unclear. The library might not work as well as we initially thought.&lt;/p&gt;
&lt;p&gt;The requirement anticipation is also that hard. The business landscape might change. The person who wants the feature might get fired. The key employee might resign, and the whole organization structure might need to change.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;I want us to be more empathetic toward business requirement gathering. It is very unfair for us to demand #NoEstimate because it is hard while also demanding to get every future requirement laid out upfront to design our program correctly.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Don’t be that entitled.&lt;/p&gt;
&lt;p&gt;In my experience, the waterfall project gets a lot of technical debt as well. There are much non-sense code or design pattern which, I believe, designed for those anticipated requirements that the team force out of business and never come true.&lt;/p&gt;
&lt;p&gt;So two secrets come to play in the Agile way to design upfront:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Contrary to popular belief of design upfront is for the future: We focus on design for current requirements.&lt;/li&gt;
&lt;li&gt;Future requirements are mostly bullshit. That is why we don’t design for that.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Approach towards future&lt;/h2&gt;
&lt;p&gt;When I said stop design for future requirements, there is a big caveat.&lt;/p&gt;
&lt;p&gt;There is no guarantee that any requirement will actually be something the user will want until we finished the software. So every requirement is essentially a future requirement.&lt;/p&gt;
&lt;p&gt;In practice, I draw the line between present requirement and future requirement based on the confidence level.&lt;/p&gt;
&lt;p&gt;For example, let say there are two requirement&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The system needs to be able to handle 1,000 req/sec (99%)&lt;/li&gt;
&lt;li&gt;The system needs to be able to handle 1,000,000 req/sec (30%)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Both of them are not required today since we don’t have a single user yet. But since we are really confident that 1,000 req/sec is required, I will design for just that. I would not think about 1,000,000 req/sec.&lt;/p&gt;
&lt;p&gt;Or this might hit closer to the home.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;User needs to be able to login using Google Account (99% confidence. All of the target users are using Google)&lt;/li&gt;
&lt;li&gt;User needs to be able to login using LDAP (30%, might happen when we know how to market to Enterprise)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Then I will design for only Google Account login. I might use a standard protocol implementation (OAuth), but in the end I would not worry about making sure the system can handle LDAP without refactoring.&lt;/p&gt;
&lt;p&gt;You can imagine the difference. In the waterfall project, the customer might ask us to support LDAP even if it not need because the customer was afraid that they would need it in the future. We will be too busy to get back and help them. So we need to “design upfront” for that future requirement.&lt;/p&gt;
&lt;p&gt;That leads to a terrible software design—a design for something that does not actually exist.&lt;/p&gt;
&lt;p&gt;In Agile, I design for only current requirements. Since everything is essentially happening in the future, I define a requirement with a high confidence level as the current requirement.&lt;/p&gt;
&lt;p&gt;For Google login, I can use OAuth. I can make an authentication services. I can put some thought on session timeout. I need to think about cookie or token. I need to think about interface of auth service and callback. That is the design phase. But I don’t think about design and interface, network diagram and service layer that can handle LDAP at this point.&lt;/p&gt;
&lt;p&gt;That is the Agile upfront design.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;To wrap up: I believe that we should think about software design. We should not become a code-monkey and churning out feature regardless of tech debt.&lt;/p&gt;
&lt;p&gt;We also need to accept that the future is unpredictable. Instead of upfronting design based on what might happen in the future, I believe we should do upfront design just for the current requirement (which can be defined by working closely with the customer as in Agile Manifesto).&lt;/p&gt;
&lt;p&gt;That’s all I have to say. Thanks for reading.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[We don't need "more documentation"]]></title><description><![CDATA[There are many sentiments around code documentation. On the one side, some advocates for self-documented code, and another side advocate for…]]></description><link>https://chrisza.me/the-documentation/</link><guid isPermaLink="false">https://chrisza.me/the-documentation/</guid><pubDate>Mon, 08 Feb 2021 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;There are many sentiments around code documentation. On the one side, some advocates for self-documented code, and another side advocate for more documentation.&lt;/p&gt;
&lt;p&gt;Truth be told, my main motivation toward writing this article is based a &lt;a href=&quot;https://www.reddit.com/r/programming/comments/le46br/why_you_need_architecturemd/&quot;&gt;Reddit’s Thread&lt;/a&gt;, esp this &lt;a href=&quot;https://www.reddit.com/r/programming/comments/le46br/why_you_need_architecturemd/gm9zut3?utm_source=share&amp;#x26;utm_medium=web2x&amp;#x26;context=3&quot;&gt;comment&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;In this article, I would like to show my thought on the topic. There are some rants I need to get off my chest.&lt;/p&gt;
&lt;h2&gt;Manager: merely more documentation does not help&lt;/h2&gt;
&lt;p&gt;I have so many thoughts about documentation. But if I have only one bullet to make a point: this will be it.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Many people working in the software industry assume documentation is easier to understand than a codebase. That assumption is not correct. Worst of all, it is not even close to the truth.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When a manager landed into a challenging hand-off project. They wish for more documentation. Sometimes, they might force a developer to write documentation with a good intention of making future maintenance work easier.&lt;/p&gt;
&lt;p&gt;But let me ask a blunt question here. When you force a developer to rewrite a set of unambiguous logical instruction steps into an ambiguous language, human language, do you actually help your developers?&lt;/p&gt;
&lt;p&gt;Here is the metaphor. You have a Spanish novel. You ask an author to translate it into English. You sent it to a person who proficient in Both English and Spanish. Which version do you think they will prefer?&lt;/p&gt;
&lt;p&gt;In my experience, it almost always easier to reason within the code.&lt;/p&gt;
&lt;h2&gt;Developer: Ask for what you need&lt;/h2&gt;
&lt;p&gt;When a developer faced a complex legacy system, they wish for more documentation. They might start to blame the previous maintainer for the lack of documentation.&lt;/p&gt;
&lt;p&gt;They might start asking for documentation or even advocate for the whole company to produce more documentation.&lt;/p&gt;
&lt;p&gt;Now let me ask you a blunt question again.&lt;/p&gt;
&lt;p&gt;You have a person who struggles to express the logical steps in a well-structured, readable manner with the language designed for it. What makes you think that forcing this person to describe those logical steps again in a human language designed for ambiguous unstructured storytelling will make it easier to read?&lt;/p&gt;
&lt;p&gt;Turns out, this is a terrible idea.&lt;/p&gt;
&lt;p&gt;I found that most of the documentation produced by some policy or checkbox, which essentially forcing a developer to write in the virtue of “we need more documentation”, will be messier than the codebase itself.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Ironically, the one who can write good documentation will write code that does not require heavy documentation.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Please, think carefully about what you really need.&lt;/p&gt;
&lt;p&gt;I understand how it feels to work in a legacy system. But asking for random documentation will not help.&lt;/p&gt;
&lt;p&gt;Because essentially, what we need is specific information, not the documentation. The core part is the information itself, and documentation is just one possible format.&lt;/p&gt;
&lt;p&gt;Understand what you really need. Don’t be reactionary. Just because you are working on a painful project and documentation does not exist there, it doesn’t mean you need more random documentation.&lt;/p&gt;
&lt;p&gt;I see many developers ranted about a customer giving them a solution, possibly a stupid one, rather than stating the problem. You know the type, the type who will tell you to implement some kind of Deep learning AI with Blockchain in his personal blog because all these fancy techs will magically solve his problem. You hate that guy, right?&lt;/p&gt;
&lt;p&gt;Don’t be that guy. Don’t ask for just more documentation.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;State the problem, not the solution.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If that’s the mindset we want from our customers, we better set an example ourselves.&lt;/p&gt;
&lt;p&gt;Stop demanding more documentation, and start to ask for missing information.&lt;/p&gt;
&lt;h2&gt;Code is just a part of system documentation&lt;/h2&gt;
&lt;p&gt;Having all that said, I will not say that we should just write a self-documented code, and we will never need documentation again.&lt;/p&gt;
&lt;p&gt;Code cannot capture every useful information about the system.&lt;/p&gt;
&lt;p&gt;There are many aspects that you cannot express in the codebase. Here are some examples&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The intention. Why is the code writing this way? How do you want everything to be connected?&lt;/li&gt;
&lt;li&gt;The norm. It is better to read about the standard way of doing things in the documentation than reading through at least 51% of the codebase to deduce.&lt;/li&gt;
&lt;li&gt;Deployment process.&lt;/li&gt;
&lt;li&gt;Assumptions.&lt;/li&gt;
&lt;li&gt;Invisible constraint of the system.&lt;/li&gt;
&lt;li&gt;Overall architecture.&lt;/li&gt;
&lt;li&gt;Strategic architectural decisions that happened in the past.&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The code cannot express these types of information. So whenever you document these, you bring some values.&lt;/p&gt;
&lt;p&gt;You can advocate for both documentation and self-documented code. That helps. Still, there are many things that code cannot express. Self-documented code is just a part of whole documentation.&lt;/p&gt;
&lt;h2&gt;Final Thought&lt;/h2&gt;
&lt;p&gt;This article is kind of a rant. Still, I believe we make the matter worst whenever we advocate for us to document more.&lt;/p&gt;
&lt;p&gt;So developer, stop asking for more documentation. Instead, understand what information do you really want and ask for that. Maybe it can come in the form of good old documentation. Perhaps it can come in a form of an executeable document (aka. code). Doesn’t matter.&lt;/p&gt;
&lt;p&gt;So manager, stop asking for more documentation. Instead, I gave you a list of many things that the codebase itself cannot express. Ask your developer to document those, not some kind of documentation.&lt;/p&gt;
&lt;p&gt;Also, a person who writes an unmaintainable codebase tends to write an also unmaintainable documentation. So don’t fall into a trap that more documentation always helps. Instead, it would be best to ask for validation with another developer.&lt;/p&gt;
&lt;p&gt;That’s all I have to rant. Thanks for reading.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Code to reflect of truth]]></title><description><![CDATA[Let say you are building an ERP application with a role-based authorization system. Let say we are building this for a company. In this…]]></description><link>https://chrisza.me/reflecting-the-knowledge/</link><guid isPermaLink="false">https://chrisza.me/reflecting-the-knowledge/</guid><pubDate>Tue, 02 Feb 2021 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Let say you are building an ERP application with a role-based authorization system.&lt;/p&gt;
&lt;p&gt;Let say we are building this for a company. In this company, we have Jane. Jane is a long-time employee with a lot of influence. What she has to say is pretty important.&lt;/p&gt;
&lt;p&gt;After some sprints passed, she looked into our demonstration, and she wanted to hide a specific menu in the main menu screen, as it is not relevant to her workflow.&lt;/p&gt;
&lt;p&gt;Usually, the system would display a different set of menus for each role. So we considered if we should hide this menu for Jane’s role? In this case, the specific menu is relevant to every employee in Jane’s role, but not Jane (for some reason).&lt;/p&gt;
&lt;p&gt;After a long negotiation, we concluded that we need to work on Jane’s change request.&lt;/p&gt;
&lt;p&gt;Now, we might go with this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;email &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;jane@thecompany.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;settingMenus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But wait, I can see some programmer scream at this line of code. We should not be hardcoding the stuff. It is a bad practice. Sloppy work!&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Now, if we get back to the requirement, what are the options to implement this?&lt;/p&gt;
&lt;p&gt;I can see three options.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Create a preference system where everyone can configure what they want to see in the main menu&lt;/li&gt;
&lt;li&gt;Make a specific role for Jane and hide the menu according to the role&lt;/li&gt;
&lt;li&gt;Hardcoding&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;And let’s evaluate each option:&lt;/p&gt;
&lt;p&gt;The first option seems to be overkill for just one person’s request. It will blow out the budget and timeline.&lt;/p&gt;
&lt;p&gt;In the second option, we create a role to conform to the current structure of the application. We might be able to create &lt;code class=&quot;language-text&quot;&gt;ACCOUTANT_BUT_FOR_JANE&lt;/code&gt;, which is another role. We can copy all the role configuration and permission from &lt;code class=&quot;language-text&quot;&gt;ACCOUNTANT&lt;/code&gt;. But then whenever the requirement for role &lt;code class=&quot;language-text&quot;&gt;ACCOUNTANT&lt;/code&gt; change, we need to make sure that &lt;code class=&quot;language-text&quot;&gt;ACCOUNTANT_BUT_FOR_JANE&lt;/code&gt; will be in sync and does not accidentally show Jane that disgusting menu.&lt;/p&gt;
&lt;p&gt;In the third option, it is simply a bad practice. Any good programmer should not be going around doing things the easy way and hardcoding stuff. They should implement everything in the right way.&lt;/p&gt;
&lt;p&gt;But is it? Is hardcoding is an easy sloppy way to implement this requirement?&lt;/p&gt;
&lt;p&gt;I would argue that since this request is a personal request from Jane herself, the hardcoding would reflect the truth in the most honest way.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;email &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;jane@thecompany.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;settingMenus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This code tells us that we hide this menu just for Jane. We don’t want to hide the menu because it appropriates some kind of new role &lt;code class=&quot;language-text&quot;&gt;ACCOUNTANT_BUT_NOT_JANE&lt;/code&gt; in the company that emerges from business need. It just simply Jane’s needs.&lt;/p&gt;
&lt;p&gt;It is a clear message to developers as well. If two years from now: Jane retired and &lt;code class=&quot;language-text&quot;&gt;jane@thecompany.com&lt;/code&gt; become reserved, this code will be dead, and we can simply remove the code.&lt;/p&gt;
&lt;p&gt;If we follow the unit test practices, we will even have a unit test:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token attribute&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Test&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token return-type class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShouldHideComplicatedSettingMenuForJane&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So I think that when we code, reflecting the truth and nature of the requirement is way more important than conforming to the structure and “best practices”.&lt;/p&gt;
&lt;p&gt;It’s ok to leave the code but with some comment to explain the context. In this case, we hardcode it because it is Jane’s personal request, and she refuses to work with the system unless we hide the menu. We can put that into the comment.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Sometimes, we don’t be totally honest with the requirement. We want the code to looks good, looks consistence and have a well-defined structured. That is what good code look like.&lt;/p&gt;
&lt;p&gt;But somtimes, the truth is the requirement and human desired can be messy.&lt;/p&gt;
&lt;p&gt;And from what I see, many times developers (including me) hate this messiness and don’t want to make a code to reflect the messy reality. So we put some fancy stuff and abstraction over it.&lt;/p&gt;
&lt;p&gt;For example, We might disdain the practice of hardcoding to just “Jane” so we might put an abstraction over it to make it seems more likable, more consistent, better structured, etc. That structure can be some role, configuration, or whatsoever.&lt;/p&gt;
&lt;p&gt;I think those abstractions will blur the real truth and nature of the requirement. And make the system even harder to maintain. It reduce the quality of the code by acting as a sophicicated sheet to covered up the actual system requirement.&lt;/p&gt;
&lt;p&gt;I think we should be honest with the requirement. If it is Jane’s personal request, make it clear that it is her personal request. reflect it truthfully no matter how messy it is.&lt;/p&gt;
&lt;p&gt;And the truth shall set you free.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The software rewrite dilemma]]></title><description><![CDATA[Imagine this: You’ve been assigned to a legacy project. It does not have any tests. It used an ancient coding style or no consistent style…]]></description><link>https://chrisza.me/rewriting-dillema/</link><guid isPermaLink="false">https://chrisza.me/rewriting-dillema/</guid><pubDate>Sun, 24 Jan 2021 05:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Imagine this: You’ve been assigned to a legacy project. It does not have any tests. It used an ancient coding style or no consistent style at all. Global variables are everywhere. Everything is such an incomprehensible mess.&lt;/p&gt;
&lt;p&gt;In this type of project, there is always someone who says&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The whole thing is a mess and unmaintainable. We need to rewrite everything from scratch.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I believe any seasoned software developer experienced this at some point in their career.&lt;/p&gt;
&lt;p&gt;And then, some of them are lucky enough to have a chance to start rewriting everything from scratch.&lt;/p&gt;
&lt;h2&gt;The ambitious rewrite project&lt;/h2&gt;
&lt;p&gt;After a while, many problems arises. The rewrite project has been ongoing for a year. There is no sign of an end at all.&lt;/p&gt;
&lt;p&gt;The business started to doubt the project. The engineering team started to say that requirement is not clear. The team started to reveal some hidden secret features in the current system that maybe only one or two customers use, but still, we must implement it. Worst of all, the new green-field architecture you designed was never meant to handle this type of feature.&lt;/p&gt;
&lt;p&gt;Deadline is looming, and you don’t even know how far are you from the finish line. How much effort do we need to put on until we can truly replace the old system? I don’t know, but everyone, please keep going.&lt;/p&gt;
&lt;p&gt;Many ambitious rewrite projects failed miserably. &lt;a href=&quot;https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/&quot;&gt;Joel Spolsky&lt;/a&gt; already wrote a great article about how this strategy has a strong tendency to failed.&lt;/p&gt;
&lt;p&gt;But contrast to this, in my career, I successfully rewrote two systems.&lt;/p&gt;
&lt;p&gt;The first system is the one I worked on for a while. I started that project by putting every business logic in stored procedures, and after a while, I realized that it becomes unmaintainable. So, I rewrote everything and move most of the business logic into the codebase.&lt;/p&gt;
&lt;p&gt;The second system, which I inherited, is very messy. I decided to rewrite the whole frontend and move it to another framework (and Angular 1 was still a thing).&lt;/p&gt;
&lt;p&gt;At the same time, I saw my friend had many failed stories to tell, both personally and sometimes in the article. So I start to think, what are the differences?&lt;/p&gt;
&lt;p&gt;And here is my assumption&lt;/p&gt;
&lt;h2&gt;The great dillema&lt;/h2&gt;
&lt;p&gt;Now, here’s the kicker:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;“You need to be unfamiliar with the system to see the value of the rewrite. But you need to be very familiar with the system to successfully rewriting it.”&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;What I see in most of the rewrite project looks like this.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;A team of programmers started working on a legacy system.&lt;/li&gt;
&lt;li&gt;They found that the system is really hard to understand and hard to work with.&lt;/li&gt;
&lt;li&gt;They fed up with the legacy codebase. They give up on it. They start suggesting a rewrite.&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;li&gt;The project fail to deliver or very lacklusting.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;And the main difference between those project and my experience is simply, &lt;strong&gt;I did not give up on the old codebase&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Most of the time, this is step four.&lt;/p&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;After the rewrite project was approved, programmers start to treat the legacy system as a black box. They refuse to touch it with a ten-foot pole. They only look into specs and build the new system accordingly.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;That is different from what I did. In my success rewrite, I never treat it at a black box.&lt;/p&gt;
&lt;p&gt;In the first project, I understand my messy stored procedures’ ins-and-outs, and it took me only a week and few days to move almost every business logic to the core code.&lt;/p&gt;
&lt;p&gt;The second project was a mess, and I have permission to rewrite it. I spent a great amount of time during the rewrite mapping out the relationship between the current messy front-end codebase and the features.&lt;/p&gt;
&lt;p&gt;At this point, I believe every successful rewrite required a significant level of understanding of the legacy system.&lt;/p&gt;
&lt;p&gt;Ironically, most programmers suggest the rewrite because they don’t want to work with the legacy system anymore. They want to be free from it. They don’t want to understand it.&lt;/p&gt;
&lt;p&gt;And that is the dilemma. Only one who brave enough to dig into legacy system, are the only one who capable of escaping.&lt;/p&gt;
&lt;h2&gt;Don’t avoid legacy code&lt;/h2&gt;
&lt;p&gt;I have one good news and one bad news.&lt;/p&gt;
&lt;p&gt;Good news: It is totally possible to rewrite the legacy system and make it much cleaner, smoother, and easier to work with. I did that before.&lt;/p&gt;
&lt;p&gt;Bad news: To succeed in the rewrite, you need to dig even deeper and get even closer to that legacy system you desperately want to avoid.&lt;/p&gt;
&lt;p&gt;In my experience: You can never trust a spec in a rewrite project. You need to look into the spec, map it with the current legacy code, see if there is any little tiny secret, and refine the specs accordingly.&lt;/p&gt;
&lt;p&gt;Sometimes those tiny little secrets can be throw away, sometimes not. You never know. But the only way to know is to lay it out. And the only way to lay it out is to become an expert in the legacy code.&lt;/p&gt;
&lt;p&gt;Then the dilemma might kick-in, because once you are familiar with and understand the legacy system’s ins-and-outs, you might not feel an urge to rewrite everything anymore.&lt;/p&gt;
&lt;p&gt;That is okay. If you still remember why do you want to rewrite the whole thing in the first place, then you will make a better-informed decision.&lt;/p&gt;
&lt;p&gt;Sometimes you might decide to rewrite only a few parts, and sometimes you might decide to refactor it just a little bit.&lt;/p&gt;
&lt;h2&gt;The hard truth&lt;/h2&gt;
&lt;p&gt;The real hard truth here is&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Once you touch legacy code, there is no escape&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If you want to move away from those messy, ugly, incomprehensible dirty code, you want to create a rewrite, then the faster you dig into it, the quicker you will move away.&lt;/p&gt;
&lt;p&gt;I repeat: There is no escape.&lt;/p&gt;
&lt;p&gt;Sometimes developers use the rewrite as an escape hatch. They don’t want to touch those ugly, incomprehensible dirty codes. They cannot maintain it effectively, so they want to rewrite it.&lt;/p&gt;
&lt;p&gt;And I sympathize with that sentiment. I understand how it feels.&lt;/p&gt;
&lt;p&gt;But still, I repeat: There is no escape.&lt;/p&gt;
&lt;p&gt;Using the rewrite project as an escape mechanism will never end well.&lt;/p&gt;
&lt;p&gt;I found that there are only two types of rewrite success story:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rewrite with full Rebrand of product, such as &lt;a href=&quot;https://medium.com/@herbcaudill/lessons-from-6-software-rewrite-stories-635e4c8f7c22&quot;&gt;Basecamp, VSCode&lt;/a&gt; and Windows 10. That required business decision to drop some of backward compatibility and whole marketing effort to rebrand as a new software package.&lt;/li&gt;
&lt;li&gt;Rewrite from the experience of legacy code. You start writing specs. Then you map all observable features to the legacy code. You read through all that to uncover all little secrets there. Then you define true specs. Only from that you can start a rewrite.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And if you don’t have the liberty to go with the first choice, I repeat again.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Once you touch legacy code, there is no escape&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The sooner you accept this statement into your heart, the quicker you can get away from legacy code.&lt;/p&gt;
&lt;p&gt;It works for me. As I started to submit myself to the fact that I need to read and understand legacy code, ironically, I began to get more and more opportunities to rewrite, refactor and eventually get away from it.&lt;/p&gt;
&lt;p&gt;The world is pretty ironic, and thanks for reading.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[My favorite blogs]]></title><description><![CDATA[These are some of the blogs I enjoy. I will share it here. Api Design This is a great article which criticized API design of Go language in…]]></description><link>https://chrisza.me/favorite-contents/</link><guid isPermaLink="false">https://chrisza.me/favorite-contents/</guid><pubDate>Sat, 23 Jan 2021 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;These are some of the blogs I enjoy. I will share it here.&lt;/p&gt;
&lt;h2&gt;&lt;a href=&quot;https://fasterthanli.me/articles/abstracting-away-correctness&quot;&gt;Api Design&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;This is a great article which criticized API design of Go language in the way that IMHO, very constructive and educational. I am pretty much align with the philosophy.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://fasterthanli.me/articles/abstracting-away-correctness&quot;&gt;Link&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a href=&quot;https://martinfowler.com/bliki/TradableQualityHypothesis.html&quot;&gt;Tradable Quality Hypothesis&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Martin Fowler put good content on why we might wrongly perceive internal quality and design as trade-offs for cheaper development. I agree that just like how we can buy a lower quality phone for lower prices, we can make a lower external quality software (eg. Non-performance critical. Non-optimal user interface) for the sake of lowering budget. However, it will be different story when it comes to internal quality.&lt;/p&gt;
&lt;p&gt;I am not saying that we must over-engineer everything we build. I think we need to be aware that buying cheaper mobile with fewer features and buying ill design software for a cheaper budget, let it be time or money, is not comparable in many ways.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://martinfowler.com/bliki/TradableQualityHypothesis.html&quot;&gt;Link&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a href=&quot;https://medium.com/javascript-scene/the-forgotten-history-of-oop-88d71b9b2d9f&quot;&gt;The Forgotten History of OOP&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Eric Elliot is one of the functional programming advocates. He wrote a great article about what OOP was initially supposed to be. This article is great content that captures the original idea of OOP.&lt;/p&gt;
&lt;p&gt;I am not a person who always advocates for any “Original stuff”. I firmly believe that, in general, the extended version of anything will be better than the original version. But in the OOP case, I agree with Alan Kay that the real value of the Object-oriented paradigm comes from multiple subsystems communicate via message instead of shared memory. Our industry emphasizes design pattern, base classes, and inheritance tree shy us away from the deep and real merit of OOP design.&lt;/p&gt;
&lt;p&gt;It does provide value to a certain degree. But if we apply Pareto’s 80/20 rules here, I would say inheritance and base class design provides the 20% side.&lt;/p&gt;
&lt;p&gt;I should write on this more sometimes. I touch the surface of this topic in the article &lt;a href=&quot;https://dev.to/chrisza4/composition-over-inheritance-1ojg&quot;&gt;Composition over Inheritance&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;CALM Theorem&lt;/h1&gt;
&lt;p&gt;Design a program on a distributed system is hard. As an industry, we are not 100% aware of limitations when you take a single node application and make it distributed.&lt;/p&gt;
&lt;p&gt;I love theorem. CAP Theorem talks about the trade-offs when you go distributed. That makes me feel at ease because I never again had to judge myself for not thinking hard enough to design a consistent and available program.&lt;/p&gt;
&lt;p&gt;CALM Theorem talk is another fantastic theorem.&lt;/p&gt;
&lt;p&gt;CALM talks about how to know if you need massive coordination. For example: If you design a highly-available stream-based average calculator. You have a program in multiple nodes calculate the average for redundancy. It is possible that each node might not yield the same result at a given time. Do you need a consensus resolver? Or you can just wait for it to be eventually consistent? The answer is: If you design a program in a specific way, then you can wait for it to be eventually consistent.&lt;/p&gt;
&lt;p&gt;I wish for this theorem to gain more traction.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://arxiv.org/abs/1901.01930&quot;&gt;Paper&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SOLID Javascript without Classes]]></title><description><![CDATA[I gave a talk in Javascript Bangkok. It is about how you can use SOLID principle in Javascript without classes and objects. My main…]]></description><link>https://chrisza.me/js-without-classes/</link><guid isPermaLink="false">https://chrisza.me/js-without-classes/</guid><pubDate>Thu, 14 Jan 2021 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I gave a talk in &lt;a href=&quot;https://javascriptbangkok.com/&quot;&gt;Javascript Bangkok&lt;/a&gt;. It is about how you can use SOLID principle in Javascript without classes and objects.&lt;/p&gt;
&lt;p&gt;My main motivation is to show the root of SOLID. I believe we can gain deeper understanding of what is an essence of SOLID and what is just simply an implementation, by looking at another manifestation of SOLID principle.&lt;/p&gt;
&lt;p&gt;Looking back, I still love the content, but I could work more on presentation esp. the tone of voice and body language.&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.49999999999999%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div class=&quot;embedVideo-container&quot;&gt; &lt;iframe title=&quot;&quot; src=&quot;https://www.youtube.com/embed/R3fv__odSbI?rel=0&quot; class=&quot;embedVideo-iframe&quot; style=&quot;border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Feedback are welcomed in &lt;a href=&quot;mailto:chakrit.lj@gmail.com&quot;&gt;email&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Why I blog here.]]></title><description><![CDATA[Hi. I have been blogging in both Medium and dev.to for a really long time. It’s time for me to try hosting my own blog, so here it is. Here…]]></description><link>https://chrisza.me/new-beginnings/</link><guid isPermaLink="false">https://chrisza.me/new-beginnings/</guid><pubDate>Tue, 12 Jan 2021 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Hi. I have been blogging in both &lt;a href=&quot;https://medium.com/@chrisza&quot;&gt;Medium&lt;/a&gt; and &lt;a href=&quot;https://dev.to/chrisza4&quot;&gt;dev.to&lt;/a&gt; for a really long time.&lt;/p&gt;
&lt;p&gt;It’s time for me to try hosting my own blog, so here it is.&lt;/p&gt;
&lt;p&gt;Here is a &lt;a href=&quot;https://github.com/chrisza4/chris-blog&quot;&gt;source code of this blog&lt;/a&gt;. I wrote a scraper for some content platform that I put a content into, so you can use those as an inspiration or prototype.&lt;/p&gt;</content:encoded></item></channel></rss>