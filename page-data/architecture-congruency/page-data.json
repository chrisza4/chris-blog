{"componentChunkName":"component---src-templates-blog-post-js","path":"/architecture-congruency/","result":{"data":{"site":{"siteMetadata":{"title":"Chris' Dialogue"}},"markdownRemark":{"id":"bde40dd5-d4b2-5d7a-95ff-019a3bbe3ea2","excerpt":"เรื่องนึงที่คนทำ Software Architecture ไม่ได้พูดถึงกันมากเท่าที่ควร คือเรื่อง Architecture Congruency หรือความสอดคล้องของ Architecture…","html":"<p>เรื่องนึงที่คนทำ Software Architecture ไม่ได้พูดถึงกันมากเท่าที่ควร คือเรื่อง Architecture Congruency หรือความสอดคล้องของ Architecture</p>\n<p>เรื่องมันมีอยู่ว่า จริงๆ แล้วการทำ Architecture decision ทุกอย่างในโลกล้วนมี Trade-offs ของมันเอง อย่างเราอาจจะไม่ได้เลือกวิธีการเชื่อม Network ตรงที่มันมี Latency น้อยที่สุด เพราะมันต้องมีการกรอง Security บางอย่าง หรือเราอาจจะไม่ได้เลือก Cloud provider ที่ถูกที่สุดเพราะระดับการ Support มันไม่พอ (หรือเราไม่เลือกตั้งเซิฟเอง)</p>\n<p>ทุกอย่างใดๆ ในโลก Software Architect ล้วนเป็น Trade-offs</p>\n<p>แต่ที่นี้คำถามใหญ่ที่นักออกแบบ Architect จะต้องตอบให้ได้คือ เรา Trade-offs เพื่อมุ่งไปสู่อะไรกันแน่</p>\n<p>เพราะทุกๆ Design decision มันมีของที่ได้มาและของที่เสียไปเสมอ</p>\n<hr>\n<p>ประเด็นรูปแบบนึงที่ผมเจอบ่อยมากจากทั้งการอ่าน Architecture decision, Article หรือทำงานจริง คือ Incongruency หรือแปลเป็นไทยว่าความไม่สอดคล้อง</p>\n<p>ซึ่งภาพมันจะออกมาเป็นแบบนี้</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/71ec59c48757d90b2a162f15824bc6e2/907fc/incongruency.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3yCSwQf/xAAVEAEBAAAAAAAAAAAAAAAAAAAQAf/aAAgBAQABBQJr/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBAAAgMAAAAAAAAAAAAAAAAAARAAITH/2gAIAQEAAT8heIDa/9oADAMBAAIAAwAAABAvP//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EKf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAERIVFBgf/aAAgBAQABPxDbHzwitm9F9GaeMZGsR//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"incongruency\"\n        title=\"\"\n        src=\"/static/71ec59c48757d90b2a162f15824bc6e2/828fb/incongruency.jpg\"\n        srcset=\"/static/71ec59c48757d90b2a162f15824bc6e2/ff44c/incongruency.jpg 158w,\n/static/71ec59c48757d90b2a162f15824bc6e2/a6688/incongruency.jpg 315w,\n/static/71ec59c48757d90b2a162f15824bc6e2/828fb/incongruency.jpg 630w,\n/static/71ec59c48757d90b2a162f15824bc6e2/0ede0/incongruency.jpg 945w,\n/static/71ec59c48757d90b2a162f15824bc6e2/3ac88/incongruency.jpg 1260w,\n/static/71ec59c48757d90b2a162f15824bc6e2/907fc/incongruency.jpg 2571w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>หลายๆ ในระบบนึง พอเราย้อนกลับไปดู การตัดสินใจอันนึงมันอาจจะดีในแง่ของ Performance อีกอันนึงอาจจะดีในแง่ของ Extensibility อีกอันนึงอาจจะดีในแง่ของ Scalability และอีกอันอาจจะดีในแง่ของ Maintainability</p>\n<p>แต่พอรวมๆ กัน ทุกอย่างติดลบหมดเลย</p>\n<p>ถ้าผมเอาตัวอย่างที่อาจจะทำให้เห็นภาพได้เร็วที่สุด ก็คงจะมีแบบนี้</p>\n<p>“ผมเลือก C++ เพราะมันเร็วถึงจะเขียนยากหน่อยก็ยอมแหละ” - โอเค เข้าใจได้</p>\n<p>“ผมเลือก Framework X นี้ใน C++ เพราะมันช่วยให้เขียนง่ายมีมาตรฐาน อาจจะช้าบางก็ยอม ยังไงก็โปรแกรมเมอร์ก็ต้องทำงานได้” - ก็โอเค เข้าใจได้</p>\n<p>แต่แล้วถ้า Framework X ตัวนี้สุดท้ายมันทำให้ Performance ของระบบต่ำมากจนกระทั่งใช้ภาษาอื่นดีกว่าล่ะครับ</p>\n<p>อ้าวววว เฮ้ยยยยย ตกลงเราจะเอาเร็ว หรือจะเอาเขียนง่ายล่ะเนี่ย</p>\n<p>ตกลงระบบมันเป็นอะไร จะเอาอะไรกันแน่</p>\n<p>สุดท้ายกลายเป็นเราได้ Worse in performance (เพราะ Framework X) &#x26; Worse in maintainability (เพราะเป็น C++)</p>\n<p>และสิ่งนี้แหละที่ผมเรียกว่า Incongruence หรือความไม่สอดคล้อง</p>\n<hr>\n<p>แล้วเราจะทำยังไงกับเรื่องแบบนี้</p>\n<p>ผมไม่รู้ว่าใครชอบดูรายการอาหารมั้ย แต่ผมชอบมากเลย</p>\n<p>เวลาที่เชฟออกมาพรีเซนต์จานอาหารของตัวเองให้กรรมการ เขาจะบอกว่า อาหารจานนี้ตั้งใจให้รสออกมาเป็นอะไร วัตถุดิบไหนเป็นตัวชูโรง ตัวไหนเป็นตัวเสริมรส อะไรเป็นรสหลัก อะไรเป็นรสซ่อนเร้น</p>\n<p>ถ้าผมพูดเป็นภาษา Business ผมจะบอกว่า เชฟทุกคนมี Vision ในจานอาหารของตัวเอง ว่าอยากให้ “ความอร่อย” มันน่าตายังไง</p>\n<p>“ความอร่อย” บนโลกนี้มันมีเป็นพันล้านแบบ ขึ้นกับวัฒนธรรม ประเภทอาหาร อร่อยของฝรั่งเศส ญี่ปุ่น กับไทย ก็ไม่เหมือนกัน</p>\n<p>แล้วสิ่งนั้นจะเป็นตัวกำหนดวกรอบคร่าวๆ ว่าอาหารจานนี้มันจะ Trade-offs รสชาติแบบไหน</p>\n<p>สมมติเราทำส้มตำปลาร้า การที่แบบรสชาติมะละกอมันกลบรสชาติปลาร้าจนแทบไม่มีกลิ่น มีเปรี้ยวนำแทนเค็ม</p>\n<p>อาจจะมีคนชอบมันบ้างก็จริง ไม่เถียง ความอร่อยมีพันล้านแบบ</p>\n<p>แต่มันบอกไม่ได้ว่าจานนี้คือ “ส้มตำปลาร้า” อีกต่อไปแล้ว</p>\n<p>ภาพสุดท้ายที่ว่าจานนี้คือ “ส้มตำปลาร้า” นั่นแหละคือตัวกำหนดกรอบ</p>\n<p>บางคนอาจจะชอบเปรี้ยว ชอบหวาน แต่ความเป็นส้มตำปลาร้ามันจะกำหนดกรอบว่าเราจะไม่ชูโรงรสหวานอร่อย เราจะไม่ซ่อนกินปลาร้า ถึงแม้จะมีคนชอบกินหวานก็ตาม</p>\n<p>หรือพูดใน Architect domain มันคือการตัวกำหนดว่า คุณจะ Trade-offs เอาความหวานเกินระดับ X ไม่ได้นะ ต่อให้จะมีคนชอบเยอะขนาดไหนก็เหอะ มันหลุดจาก Vision ของความเป็นส้มตำปลาร้าไปแล้ว มันถึงจุดแล้วที่ว่าคนกลุ่มนี้น่าจะไปสั่งอาหารประเภทอื่นกิน</p>\n<p>คุณไปสั่งส้มตำไทยกินแทนเหอะ ถ้าจะชอบเปรี้ยวหวานขนาดนั้น ถ้าจะเกลียดกลิ่นปลาร้าขนาดนั้น</p>\n<hr>\n<p>ทีนี้กลับมาโดเมนการออกแบบ Software Architect</p>\n<p>ข้อแรกคือเรามีการสกัด Vision ตรงนั้นมั้ย</p>\n<p>ถ้าเราตั้งใจจะเป็น “High performance web server in Python” สมมติตั้งชื่อใหม่ว่า PyRush มันจะกำหนดกรอบอะไรไว้บ้าง</p>\n<ol>\n<li>เราจะใช้ภาษา Python</li>\n<li>เราจะเลือกวิธีการเขียนที่เร็วที่สุด ตัด Waste ให้ได้มากที่สุด</li>\n<li>ถ้ามันมีวิธีการที่เขียนง่ายขึ้นแต่เสีย Performance มันจะต้องง่ายขึ้นมากๆๆๆๆๆๆๆๆๆๆ และเสีย Performance ไปน้อยมากๆๆๆๆๆๆๆๆ เราถึงจะเลือก</li>\n</ol>\n<p>และมันจะมีกรอบอีกมากมายที่ทำให้มันไม่หลุด</p>\n<p>ข้อสองคือเราเข้าใจกรอบนี้มั้ย เพราะการตัดสินใจทุกอย่างจะต้องสอดคล้องกับ Vision ที่เราตั้งขึ้น ไม่ใช่อยู่ดีๆ แบบ วันนี้เจอปัญหาคนบ่นว่าเขียนและ Contribute ยากจัง กลายเป็นเรามาใช้ Unoptimized algorithm ที่อ่านง่ายๆ ดีกว่า</p>\n<p>และคล้ายๆ กับความเป็นส้มตำปลาร้า ถ้ามีใครบอกว่า ทำไม PyRush มันถึงไม่มี ORM ไม่มีเครื่องมือหลายๆ อย่างที่คนอื่นเขามี</p>\n<p>เราก็จะตอบไปว่า ถ้าพี่อยากได้ขนาดนั้น พี่ไป Django เถอะครับ</p>\n<p>ดังนั้นถ้าคุณเจอปัญหาว่า Architecture ของคุณมันดูแต่ละการตัดสินใจก็สมเหตุสมผล แต่รวมๆ กันทำไมมันประหลาด ดูจับฉ่าย ดูเอาอะไรไม่ได้</p>\n<p>ลองเช็คเรื่อง Congruency ครับ คุณมี Vision และทำงานสอดคล้องกับ Vision มั้ย</p>\n<hr>\n<p>สุดท้ายช่วงโฆษณา Tie-in</p>\n<p>ทีนี้การสร้าง Vision เราจะทำอย่างไรนะ</p>\n<p>สิ่งนึงที่เราต้องเข้าใจคือ Vision จะมีความหมายต่อเมื่อมันสอดคล้อง Resonate กับ Human Values บางอย่าง</p>\n<p>ในฐานะมนุษย์มีอะไรที่เราให้คุณค่าบ้างล่ะ เยอะแยะไปหมด แต่ตัวอย่างง่ายๆ ก็คือแบบ Scale ได้ Performance ดี ดูแลง่าย ประหยัดต้นทุน</p>\n<p>พวกนี้มันคือคุณค่าพื้นฐานที่มนุษย์ไม่ตั้งคำถามว่า “จะมีไปทำไม”</p>\n<p>โอเคส่วนตัวคุณอาจจะไม่ได้เป็นคนประหยัดใช่มั้ยครับ แต่เวลาคุณเห็นคนประหยัด คุณไม่งงว่าไอ้หมอนี่มันเป็นบ้าอะไร เป็นมนุษย์ต่างดาวหรือเปล่า</p>\n<p>คุณเข้าใจได้ว่าพื้นฐานมนุษย์ทุกคนมีแรงจูงใจทีและแนวโน้มว่าจะประหยัดถ้าทำได้ แม้ตัวคุณอาจจะสุรุ่ยสุร่ายติดหนี้บัตรเครดิเต็มไปหมดอยู่ก็ตามเหอะ</p>\n<p>ดังนั้น Vision ถ้ามันสอดคล้องกับ “ความประหยัด” โอเค ไม่ใช่ทุกคนที่ซื้อหรอก บางคนอาจจะบอกว่า Dev productivity สำคัญกว่า ผมต้องการออกฟีเจอร์เร็วๆ ต่อให้ต้นทุน Operation สูงขึ้นก็ยอม</p>\n<p>แต่มันเข้าใจได้และมีคนที่ซื้อแน่ๆ</p>\n<p>ทั้งหมดนี้คือที่มาของคอร์ส <a href=\"https://chrisza.me/course/\">Humanistic Architecture</a> ซึ่งเป็นศคอร์สที่ผมเรียกว่าผมสอนเรื่องาน Design อย่างแท้จริง</p>\n<p>ในคอร์สนี้ผมพูดถึงศาสตร์ของการ Design Architecture ที่ผมแยกออกมาและคิดว่าคนพูดถึงน้อยมาก คือ Congruency ซึ่งมันจะครอบคลุมถึง</p>\n<ol>\n<li>การ Design ภาพปลายทางให้มันสอดคล้องกับ Human value</li>\n<li>การจัดการออกแบบให้สอดคล้องกับภาพปลายทางนั้น ไม่เขวออกไปจากจุดนั้น</li>\n</ol>\n<p>และทั้งหมดนี้คือส่วน Design ที่แท้จริง ที่มันแยกออกมาจากการที่ว่า “มี Requirement มาว่างแล้ว คุณจะแก้ปัญหายังไง”</p>\n<p>ไอ้ส่วนที่มี Requirement มีความต้องการมาวาง แล้วถามว่า จะใช้ Stack อะไร จะออกแบบแยกระบบยังไงบ้าง มี Pattern แบบไหนที่เหมาะสม อันหลังผมเรียกว่า Solutioning, Problem solving part ครับ ไม่ใช่ส่วนของการ Design</p>\n<p>ซึ่งก็เป็นอีกส่วนที่สำคัญของ Architect ครับแต่แค่ในคอร์สผมไม่ครอบคลุม ไปอ่านหรือไปเรียนที่อื่นได้ ผมคิดว่าคนพูดและเขียนหนังสือเยอะ(หรือซักวันผมอาจจะสอนพวกนั้นก็ได้ แต่ตอนนี้ยัง)</p>\n<p>แต่เรื่อง Pure Design Part of Software Architecture เนี่ย ผมแทบไม่เคยเห็นใครพูดหรือสอน ผมว่าวันนี้เวลานี้ ผมน่าจะเป็นไม่กี่คนในโลก ที่สอนและพูดเรื่องนี้</p>\n<p>ผมบอกในเว็บเนื้อหาคอร์สว่า ถ้าคุณงงว่าระบบ Trade-offs มันมีเยอะๆ คุณเลือกยังไง นี่แหละคือคำตอบแบบคร่าวๆ สร้าง Vision ที่มัน Resonance กับคุณค่ามนุษย์ แล้วทำ Trade-offs ให้สอดคล้องกับสิ่งนี้</p>\n<p>แต่ถ้าอยากรู้ลึกกว่านี้ว่าการ Resonance กับ Human value มันมาประสานจนได้ Architecture decision แบบไหน</p>\n<p>ก็มาเรียนครับ ปีนี้น่าจะเปิดสองรอบ กลางปีกับปลายปี ได้วันเดี๋ยวผมบอกอีกที</p>\n<p>และนี่คือทำไมคอร์ส Software architecture ของผมมันถึงเอาไป Tie-in กับจิตวิทยามนุษย์ได้ มันก็ตรงนี้แหละครับ</p>","frontmatter":{"title":"Architecture Congruency","date":"Invalid date","description":null}},"previous":{"fields":{"slug":"/basic-hell-loop/"},"frontmatter":{"title":"Basic ของการแกะลูปนรก"}},"next":null},"pageContext":{"id":"bde40dd5-d4b2-5d7a-95ff-019a3bbe3ea2","previousPostId":"dfbe79c1-0b95-5bfd-99d4-a6cc2b00e269","nextPostId":null}},"staticQueryHashes":["1033745147","2841359383"],"slicesMap":{}}